<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


	<p:dialog id="modalContrato"
		header="#{messageBundle['label.atendimento.header.modal.contrato']}"
		widgetVar="modalContrato" modal="true" >
	
		<h:panelGrid columns="1" id="idPgdCamposContrato" cellpadding="0"
			style="width:100%;">			
			<p:tabView id="idTabContrato" style="width:1024px;height:450px" >
				<p:tab id="idContrato" title="#{messageBundle['label.contrato.tabview.tabContrato.contrato']}"  >
					<h:panelGrid columns="2" cellpadding="0" style="width:100%;">
						<h:panelGrid columns="3">
							<h:outputLabel value="#{messageBundle['label.contrato.field.numerocontrato']}" styleClass="text-bold" />									
							<h:outputLabel value="#{messageBundle['label.contrato.field.cpfcontratante']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.contrato.field.rgcontratante']}" styleClass="text-bold" />
							<p:inputText id="idTxtNumeroContrato" maxlength="10" style="width:100px;" disabled="true" value="#{atendimentoBean.contrato.numeroContrato}"/>										
							<p:inputText id="idTxtPedido" 
								value="#{atendimentoBean.contrato.contratante.cpfContratante}"
								style="width:110px;" styleClass="cpfMask"  
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cpfcontratante.required']}" 
								validatorMessage="#{messageBundle['message.contrato.field.cpfcontratante.invalid']}">
									<f:validator validatorId="cpfValidator"/>
								</p:inputText>												
							<p:inputText id="idTxtRgContrato" maxlength="9" 
								value="#{atendimentoBean.contrato.contratante.rgContratante}" 
								style="width:115px;" 
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.rgcontratante.required']}" />											
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:outputLabel value=""  styleClass="text-bold" />
							<h:outputLabel value=""  styleClass="text-bold" />
						</h:panelGrid>
					</h:panelGrid>
					<h:panelGrid columns="1" cellpadding="5" style="width:100%;">							
							<h:panelGrid columns="3">
								<h:outputLabel value="#{messageBundle['label.generic.field.datavalidade.inicio']}"
									styleClass="text-bold" />
								<h:outputLabel value="#{messageBundle['label.generic.field.datavalidade.final']}"
									styleClass="text-bold" />
								<h:outputLabel value="#{messageBundle['label.contrato.field.datasuspensao']}" styleClass="text-bold" />
								<p:calendar  value="#{atendimentoBean.contrato.dtInicioValidade}"
									showButtonPanel="true" navigator="true"										
									mode="popup" id="idTxtDataInicioValidade" pattern="dd/MM/yyyy" 
									locale="#{atendimentoBean.locale}"
									required="true"
									mindate="#{atendimentoBean.dataMinimaInicioValidade}"
									requiredMessage="#{messageBundle['message.contrato.field.datainiciovalidade.required']}" 
									converterMessage="#{messageBundle['message.contrato.field.datainiciovalidade.invalid']}"/>										
										
								<p:calendar value="#{atendimentoBean.contrato.dtFinalValidade}"
											showButtonPanel="true" navigator="true"
											mindate="#{atendimentoBean.dataAtual}"									
											mode="popup" id="idTxtDataFinalValidade" pattern="dd/MM/yyyy" 
											locale="#{atendimentoBean.locale}"
											converterMessage="#{messageBundle['message.contrato.field.datafimvalidade.invalid']}"/>
								<p:calendar value="#{atendimentoBean.contrato.dtSuspensao}"
											showButtonPanel="true" navigator="true"										
											mindate="#{atendimentoBean.dataAtual}"										
											mode="popup" id="idTxtDataSuspensao" pattern="dd/MM/yyyy" 
											locale="#{atendimentoBean.locale}" 
											converterMessage="#{messageBundle['message.contrato.field.datasuspensao.invalid']}" />
							</h:panelGrid>

							<h:panelGrid columns="1">
								<h:outputLabel value="#{messageBundle['label.contrato.field.pacoteservico']}"
									styleClass="text-bold" />
								<p:selectOneMenu id="idCmbServico" value="#{atendimentoBean.contrato.pacoteServico.idPacote}" style="width:350px;" 
									validatorMessage="#{messageBundle['message.contrato.field.pacoteservico.required']}">
									<f:selectItem itemValue="0" itemLabel="Selecione..."/>
									<f:selectItems value="#{atendimentoBean.listaServicos}"/>
									<f:validator validatorId="comboRequiredValidator"/>										
								</p:selectOneMenu>
							</h:panelGrid>
						</h:panelGrid>				
				</p:tab>		
				
				<p:tab  id="idTabClienteBase" title="#{messageBundle['label.contrato.tabview.tabContrato.clientebase']}"
							style="width:99.5%;">
							
					<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
						<h:panelGrid columns="3">
							<h:outputLabel value="#{messageBundle['label.contrato.field.cpfcliente']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.contrato.field.rgcliente']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.contrato.field.nomecliente']}" styleClass="text-bold" />
							<p:inputText id="idTxtCpfCliente"
								value="#{atendimentoBean.contrato.cliente.cpf}"
								style="width:150px;" styleClass="cpfMask"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cpfcliente.required']}" 
								validatorMessage="#{messageBundle['message.contrato.field.cpfcliente.invalid']}" 
								disabled="#{atendimentoBean.crud == 'U'}">
									<f:validator validatorId="cpfValidator" />
							</p:inputText>		
							<p:inputText id="idTxtRgCliente" 
								maxlength="14"
								value="#{atendimentoBean.contrato.cliente.rg}"
								style="width:150px;" 
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.rgpacliente.required']}" />										
							<p:inputText id="idTxtNomeCliente" 
								maxlength="60"
								value="#{atendimentoBean.contrato.cliente.nome}"
								style="width:648px;" 
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.nomecliente.required']}" />
						</h:panelGrid>
						
						<h:panelGrid columns="2">
							<h:outputLabel value="#{messageBundle['label.generic.field.endereco']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.bairro']}" styleClass="text-bold" />
							<p:inputText id="idTxtEnderecoCliente" 
								maxlength="60"
								value="#{atendimentoBean.contrato.cliente.endereco.endereco}"
								style="width:477px;"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.enderecocliente.required']}" />
							<p:inputText id="idTxtBairroCliente"
								maxlength="60" 
								value="#{atendimentoBean.contrato.cliente.endereco.bairro}"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.bairrocliente.required']}"										
								style="width:485px;" />
						</h:panelGrid>
						
						<h:panelGrid columns="4">
							<h:outputLabel value="#{messageBundle['label.generic.field.cidade']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.uf']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.cep']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.sexo']}" styleClass="text-bold" />
							<p:inputText id="idTxtCidadeCliente" 
								maxlength="60"
								value="#{atendimentoBean.contrato.cliente.endereco.cidade}"	
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cidadecliente.required']}"									
								style="width:477px;" />
							<p:selectOneMenu id="idComboUfCliente" 
								value="#{atendimentoBean.contrato.cliente.endereco.uf}" style="width:150px;" 
								validatorMessage="#{messageBundle['message.contrato.field.ufcliente.required']}">
								<f:selectItem itemValue="0" itemLabel="Selecione..."/>
								<f:selectItems value="#{atendimentoBean.listaUf}"/>
								<f:validator validatorId="comboRequiredValidator"/>	
							</p:selectOneMenu>
							<p:inputText id="idTxtCepCliente" 
								value="#{atendimentoBean.contrato.cliente.endereco.cep}"										
								style="width:100px;" styleClass="cepMask"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cepcliente.required']}"/>
							<p:selectOneMenu id="idCboSexoCliente" 
								value="#{atendimentoBean.contrato.cliente.sexo}" 
								style="width:150px;"
								validatorMessage="#{messageBundle['message.contrato.field.sexocliente.required']}">
								<f:selectItem itemValue="0" itemLabel="Selecione..."/>
								<f:selectItems value="#{atendimentoBean.listaSexo}"/>	
								<f:validator validatorId="comboRequiredValidator"/>												
							</p:selectOneMenu>
						</h:panelGrid>
						
						<h:panelGrid columns="2">									
							<h:outputLabel value="#{messageBundle['label.generic.field.datanascimento']}" styleClass="text-bold" />
							<h:outputLabel value=" " />
							<p:calendar 
								value="#{atendimentoBean.contrato.cliente.dataNascimento}"
								showButtonPanel="true" navigator="true"										
								mode="popup" id="idTxtDataNascimentoCliente" pattern="dd/MM/yyyy" 
								yearRange="1912"
								locale="#{atendimentoBean.locale}"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.datanascimentocliente.required']}"
								converterMessage="#{messageBundle['message.generic.field.datanascimento.invalid']}" />
								<p:commandButton id="idCmdModalFormaContatoCliente" value="Formas de Contato" onclick="modalFormaContatoCliente.show();" type="button"/>						
						</h:panelGrid>

						<h:panelGrid columns="1">
							<h:outputLabel 
								value="#{messageBundle['label.contrato.field.necessidadesespeciais']}"
								styleClass="text-bold" />
							<p:inputTextarea rows="5" 
								value="#{atendimentoBean.contrato.cliente.necessidadeEspecial}"
								style="width:975px;" />
						</h:panelGrid>
							<h:panelGrid columns="2" columnClasses="alignLeftTop, nothing">
							<h:outputLabel 
								value="#{messageBundle['label.contrato.field.planosaude']}" 
								styleClass="text-bold" />
							<h:outputLabel 
								value="#{messageBundle['label.contrato.field.cobertura']}"  
								styleClass="text-bold" />
							<p:inputText id="idTxtPlanoSaude" 
								value="#{atendimentoBean.contrato.cliente.planoSaude}"
								maxlength="60"
								style="width:500px;" />
							<p:inputTextarea rows="5" 
								value="#{atendimentoBean.contrato.cliente.cobertura}"
								style="width:460px;" />
						</h:panelGrid>								
					</h:panelGrid>
				</p:tab>	
				
				<p:tab id="idTabClienteDoenca" title="#{messageBundle['label.contrato.tabview.tabContrato.doencas']}"
							style="width:1024px;">						
							<h:panelGrid columns="1" cellpadding="0">
								<h:panelGrid columns="2" columnClasses="nothing, alignLeft" border="0">
									<h:outputLabel value="#{messageBundle['label.contrato.field.filtrodoenca']}" styleClass="text-bold" />
									<h:outputLabel value="" />
									<p:inputText id="idTxtFiltroDoencas" value="#{atendimentoBean.filtroDoenca}" style="width:600px;" />
									<p:commandButton id="idCmdFiltrarDoenca"
										ajax="true"
										value="#{messageBundle['label.generic.button.filter']}"
										icon="ui-icon-search" 
										style="margin:0"										
										actionListener="#{atendimentoBean.filtrarDoencas}"										
										update=":frmAtendimento:growMessage, :frmAtendimento:modalSelecionarDoenca" 
										process="@this, :frmAtendimento:idTabContrato:idTxtFiltroDoencas"
										oncomplete="modalSelecionarDoenca.show()"/>										
								</h:panelGrid>

								<h:panelGrid border="0" id="idPgdGradeDoencas" >
									<p:dataTable id="idDtbDoencasCliente" var="item" value="#{atendimentoBean.contrato.cliente.listaDoencas}" 
									emptyMessage="Não existem doenças cadstradas para esste cliente !" >
									<p:column id="colunaExcluirDoenca" style="width:15px;" styleClass="alignCenter">
										<f:facet name="header">
											<h:outputText value=""  />
										</f:facet>
										<p:commandLink  onclick="modalExcluirDoenca('#{item.codigoCID}');">
											<h:graphicImage url="/#{atendimentoBean.urlImage}/crud/delete.jpg" width="15" height="15"/>
										</p:commandLink>
									</p:column>								
									<p:column id="colunaDoencasSelecionadas" style="width:85px;" styleClass="alignCenter">
										<f:facet name="header">
											<h:outputText value="Código CID"  />											
										</f:facet>
										<h:outputText value="#{item.codigoCID}"/>
									</p:column>
									<p:column id="colunaDescricaoDoenca" style="width:924px;" >
										<f:facet name="header">
											<h:outputText value="#{messageBundle['label.generic.field.descricao']}" />
										</f:facet>
										<h:outputText value="#{item.nomeDoenca}"/>
									</p:column>									
								</p:dataTable>					

								</h:panelGrid>
							</h:panelGrid>							
				</p:tab>		
				
				<p:tab id="idTabClienteTratamento" 
					title="#{messageBundle['label.contrato.tabview.tabContrato.tratamento']}" style="width:1024px;" >
					<h:panelGrid columns="1" id="idPgdCamposTratamento" cellpadding="0"
						style="width:100%;">
	
						<h:panelGrid columns="4" id="idPgdGrupoTratamento1" border="0">
							<h:outputLabel
								value="#{messageBundle['label.contrato.field.nomeTratamento']}"
								styleClass="text-bold" />
							<h:outputLabel
								value="#{messageBundle['label.contrato.field.horaminutoinicialtratamento']}"
								styleClass="text-bold" />
							<h:outputLabel
								value="#{messageBundle['label.contrato.field.periodicidade']}"
								styleClass="text-bold" />
							<h:outputLabel value="" styleClass="text-bold" />
							<p:inputText id="idTxtNomeTratamento"
								value="#{atendimentoBean.tratamento.nomeTratamento}"
								style="width:400px;" />
							<p:calendar value="#{atendimentoBean.tratamento.dataHoraInicial}"
								showButtonPanel="true" navigator="true" yearRange="1912"
								pattern="dd/MM/yyyy HH:mm" locale="#{atendimentoBean.locale}"
								converterMessage="#{messageBundle['message.contrato.field.horaminutoinicialtratamento']}" />
							<p:selectOneMenu id="cmbPeridiocidade"
								value="#{atendimentoBean.tratamento.frequencia}" style="width:90px;">
								<f:selectItems value="#{atendimentoBean.listaPeriodicidade}" />
							</p:selectOneMenu>
	
							<p:commandButton id="idCmdModalHorariosTratamento"
								icon="ui-icon-clock" value="Horários"
								onclick="modalHorariosTratamento.show();" type="button" />
						</h:panelGrid>
						<h:panelGrid columns="1" id="idPgdGrupoTratamento2"
							style="width:100%;" border="0">
							<h:outputLabel
								value="#{messageBundle['label.generic.field.descricao']}"
								styleClass="text-bold" />
							<p:inputTextarea id="idTxtDescricaoTratamento" rows="5"
								style="width:975px;"
								value="#{atendimentoBean.tratamento.descricaoTratamento}" maxlength="60"/>
						</h:panelGrid>
	
						<h:panelGrid columns="1"
							style="width:99.5%;text-align:right !important;padding-right:0px;">
							<p:commandButton id="idCmdAdicionarTratamento"
								value="#{messageBundle['label.generic.button.add']}"
								icon="ui-icon-plus" style="margin:0"
								process=":frmAtendimento:idTabContrato:idPgdCamposTratamento"
								ajax="true" actionListener="#{atendimentoBean.adicionarTratamento}"
								update=":frmAtendimento:growMessage, :frmAtendimento:idTabContrato:idPgdCamposTratamento, :frmAtendimento:idPgdCamposHorario"
								oncomplete="fixarMascara();" />
						</h:panelGrid>
	
						<!-- Tabela de resultados -->
						<h:panelGrid columns="1" id="idPgdGrupoTratamento3"
							style="width:100%;" border="0">
							<p:dataTable id="idDtbTratamento" var="item"
								value="#{atendimentoBean.contrato.cliente.listaTratamentos}"
								rendered="true"
								emptyMessage="#{messageBundle['message.contrato.datatable.tratamento.empty']}">
								<p:column id="modelHeader" style="width:100px;">
									<f:facet name="header">
										<h:outputText
											value="#{messageBundle['label.generic.column.action']}" />
									</f:facet>
									<h:panelGrid columns="3"
										columnClasses="noBorder, noBorder, noBorder">
										<p:commandLink title="Novo" ajax="true" partialSubmit="true"
											process="@this"
											update=":frmAtendimento:idTabContrato:idPgdCamposTratamento, :frmAtendimento:idPgdCamposHorario, :frmAtendimento:txtIdHorario"
											actionListener="#{atendimentoBean.novoTratamento}"
											immediate="true"
											oncomplete="$('.ui-state-error').removeClass('ui-state-error');fixarMascara();">
											<h:graphicImage
												url="/#{atendimentoBean.urlImage}/crud/greencross-25x25.jpg"
												width="15" height="15" alt="Novo" />
										</p:commandLink>
										<p:commandLink title="Editar" ajax="true" partialSubmit="true"
											process="@this"
											update=":frmAtendimento:growMessage, :frmAtendimento:idTabContrato:idPgdCamposTratamento, :frmAtendimento:idPgdCamposHorario"
											actionListener="#{atendimentoBean.editarTratamento}"
											oncomplete="$('.ui-state-error').removeClass('ui-state-error');fixarMascara();">
											<f:param name="idTratamento" value="#{item.idTratamento}" />
											<h:graphicImage
												url="/#{atendimentoBean.urlImage}/crud/edit-pen-25x25.jpg"
												width="15" height="15" alt="Editar" />
										</p:commandLink>
										<p:commandLink
											onclick="modalExcluirTratamento('${item.idTratamento}');"
											title="Excluir">
											<h:graphicImage url="/#{atendimentoBean.urlImage}/crud/delete.jpg"
												width="15" height="15" alt="Excluir" />
										</p:commandLink>
									</h:panelGrid>
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messageBundle['label.contrato.datatable.tratamento.column.1']}" />
									</f:facet>
									<h:outputText value="#{item.nomeTratamento}" />
								</p:column>
								<p:column style="width:200px;">
									<f:facet name="header">
										<h:outputText
											value="#{messageBundle['label.contrato.datatable.tratamento.column.2']}" />
									</f:facet>
									<h:outputText value="#{item.dataHoraInicial}">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm"
											locale="#{atendimentoBean.locale}" />
									</h:outputText>
								</p:column>
	
								<p:column style="width:200px;">
									<f:facet name="header">
										<h:outputText
											value="#{messageBundle['label.contrato.datatable.tratamento.column.3']}" />
									</f:facet>
									<h:outputText value="#{item.frequencia}">
										<f:converter converterId="periodicidadeConverter" />
									</h:outputText>
								</p:column>
	
							</p:dataTable>
						</h:panelGrid>
					</h:panelGrid>
				</p:tab>							
			</p:tabView>
						
			<!-- Barra de botões -->
			<h:panelGrid columns="1" id="idPanelGridBarraBotoesContrato"
				style="width:100%;text-align:right !important;padding-right:0px;">
				<h:panelGroup>
					<p:commandButton id="cmdSalvarDadosContrato"
						value="#{messageBundle['label.generic.button.save']}"
						icon="ui-icon-check" style="margin:0"
						process="@this, :frmAtendimento:modalContrato"
						actionListener="#{atendimentoBean.salvarDadosContrato}" 
						update=":frmAtendimento:growMessage, frmAtendimento:idPgdPrincipal"
						onclick="dlgWaiting.show()"
						oncomplete="handleSaveRequest(xhr, status, args)"/>
						
					<h:outputLabel />
					<p:commandButton
						value="#{messageBundle['label.generic.button.close']}"
						icon="ui-icon-circle-close" style="margin:0" ajax="false"								
						type="button"
						onclick="modalContrato.hide()"/>
				</h:panelGroup>
			</h:panelGrid>
			<h:panelGrid></h:panelGrid>			
		</h:panelGrid>
	</p:dialog>


	<p:dialog id="modalFormaContatoCliente"
		header="Formas de contato com o cliente"
		widgetVar="modalFormaContatoCliente" modal="true"
		onShow="displayTelefoneEmailCliente(1);" width="600">
	
		<h:panelGrid columns="1" id="idPgdCamposFormaContatoCliente"
			cellpadding="0" style="width:100%;">
			<h:inputHidden id="txtIdFormaContatoCliente"
				value="#{atendimentoBean.formaContato.idFormaContato}" />
			<h:panelGrid columns="3" id="idPgdGrupoCamposFormaContatoCliente1"
				border="0">
				<h:outputLabel
					value="#{messageBundle['label.generic.field.contato.tipo']}"
					styleClass="text-bold" />
				<h:outputLabel id="idLblFormaContatoClienteTelefone"
					value="#{messageBundle['label.generic.field.telefone']}"
					styleClass="text-bold" />
				<h:outputLabel id="idLblFormaContatoClienteEmail"
					value="#{messageBundle['label.generic.field.email']}"
					styleClass="text-bold" />
				<p:selectOneMenu id="idCmbTipoFormaContatoCliente"
					style="width:180px;"
					value="#{atendimentoBean.formaContato.tipoContato}"
					onchange="displayTelefoneEmailCliente(this.value)">
					<f:selectItems value="#{atendimentoBean.listaFormaContato}" />
				</p:selectOneMenu>
	
				<p:inputText id="idTxtFormaContatoClienteTelefone"
					value="#{atendimentoBean.formaContato.telefone}" style="width:140px;"
					styleClass="telefoneFixoMask" />
	
				<p:inputText id="idTxtFormaContatoClienteEmail"
					value="#{atendimentoBean.formaContato.email}" style="width:300px;" />
	
			</h:panelGrid>
	
			<h:panelGrid columns="1"
				style="width:99.5%;text-align:right !important;padding-right:0px;">
				<p:commandButton value="#{messageBundle['label.generic.button.add']}"
					icon="ui-icon-plus" style="margin:0"
					process=":frmAtendimento:idPgdCamposFormaContatoCliente"
					ajax="true"
					actionListener="#{atendimentoBean.adicionarFormaContatoCliente}"
					update="@this, :frmAtendimento:growMessage, :frmAtendimento:idPgdCamposFormaContatoCliente"
					oncomplete="fixarMascara();updateFormContatoCliente();" />
				<f:event listener="#{atendimentoBean.validarPreenchimentoCamposFormaContatoCliente}"
					type="preValidate" />
			</h:panelGrid>
	
			<p:dataTable id="idDtbFormaContatoCliente" var="item"
				value="#{atendimentoBean.contrato.cliente.listaFormaContato}"
				rendered="true"
				emptyMessage="#{messageBundle['message.contrato.datatable.formacontato.empty']}">
	
				<p:column id="modelHeader" style="width:100px;">
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.generic.column.action']}" />
					</f:facet>
					<h:panelGrid columns="3"
						columnClasses="noBorder, noBorder, noBorder">
	
						<p:commandLink title="Novo" ajax="true" partialSubmit="true"
							process="@this"
							update=":frmAtendimento:idPgdGrupoCamposFormaContatoCliente1, :frmAtendimento:txtIdFormaContatoCliente"
							actionListener="#{atendimentoBean.novaFormaContato}" immediate="true"
							oncomplete="$('.ui-state-error').removeClass('ui-state-error');fixarMascara(); displayTelefoneEmailCliente(1);">
							<h:graphicImage
								url="/#{atendimentoBean.urlImage}/crud/greencross-25x25.jpg"
								width="15" height="15" alt="Novo" />
						</p:commandLink>
	
						<p:commandLink title="Editar" ajax="true" partialSubmit="true"
							process="@this, :frmAtendimento:idPgdGrupoCamposFormaContatoCliente1"
							update=":frmAtendimento:growMessage, :frmAtendimento:idPgdGrupoCamposFormaContatoCliente1, :frmAtendimento:txtIdFormaContatoCliente"
							actionListener="#{atendimentoBean.editarFormaContatoCliente}"
							oncomplete="$('.ui-state-error').removeClass('ui-state-error');updateFormContatoCliente();fixarMascara();">
							<f:param name="idFormaContatoCliente"
								value="#{item.idFormaContato}" />
							<h:graphicImage
								url="/#{atendimentoBean.urlImage}/crud/edit-pen-25x25.jpg" width="15"
								height="15" alt="Editar" />
						</p:commandLink>
	
						<p:commandLink
							onclick="modalExcluirFormaContatoCliente('${item.idFormaContato}');"
							title="Excluir">
							<h:graphicImage url="/#{atendimentoBean.urlImage}/crud/delete.jpg"
								width="15" height="15" alt="Excluir" />
						</p:commandLink>
					</h:panelGrid>
				</p:column>
	
				<p:column>
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.contrato.datatable.formacontato.column.1']}" />
					</f:facet>
					<h:outputText value="#{item.tipoContato}">
						<f:converter converterId="formaContatoConverter" />
					</h:outputText>
				</p:column>
	
				<p:column style="width:200px;">
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.contrato.datatable.formacontato.column.2']}" />
					</f:facet>
					<h:outputText value="#{item.telefone}" >
						<f:converter converterId="telefoneConverter"/>
					</h:outputText>
				</p:column>
	
				<p:column style="width:200px;">
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.contrato.datatable.formacontato.column.3']}" />
					</f:facet>
					<h:outputText value="#{item.email}" />
				</p:column>
	
			</p:dataTable>
	
			<p:panelGrid columns="1"
				style="width:100%;text-align:right !important;padding-right:0px;">
				<h:panelGroup>
					<p:commandButton
						value="#{messageBundle['label.generic.button.close']}"
						type="button" onclick="modalFormaContatoCliente.hide();" />
				</h:panelGroup>
			</p:panelGrid>
		</h:panelGrid>
	</p:dialog>
	
	<p:confirmDialog id="idDlgExcluirFormaContatoCliente"
		message="#{messageBundle['message.generic.confirmDialog.delete.formacontato.title']}"
		header="Confirma exclusão ?" severity="alert"
		widgetVar="excluirFormaContatoCliente">
		<p:commandButton id="idCmdExcluirFormaContatoClienteSim"
			value="#{messageBundle['label.generic.button.yes']}"
			partialSubmit="true"
			process="@this, frmAtendimento:txtIdFormaContatoCliente"
			update=":frmAtendimento:growMessage, frmAtendimento:txtIdFormaContatoCliente, frmAtendimento:idDtbFormaContatoCliente"
			oncomplete="excluirFormaContatoCliente.hide()"
			actionListener="#{atendimentoBean.excluirFormaContatoCliente}" />
		<p:commandButton id="idCmdExcluirFormaContatoClienteNao"
			value="#{messageBundle['label.generic.button.no']}"
			onclick="excluirFormaContatoCliente.hide()" type="button" ajax="false"
			immediate="true" />
	</p:confirmDialog>
     
	<p:dialog id="modalHorariosTratamento" header="Horários"
		widgetVar="modalHorariosTratamento" modal="true">
		<h:panelGrid columns="1" id="idPgdCamposHorario" cellpadding="0" style="width:100%;">	
			<h:panelGroup>
				<p:inputText id="idTxtHorarioTratamento"
					value="#{atendimentoBean.horarioTratamento}"
					styleClass="horaMinutoMask" style="width:70px;" >
						<f:validator validatorId="horarioValidator"/>
				</p:inputText>	
				<h:outputText value=" " />
				<h:outputText value=" " />
				<h:outputText value=" " />
				<p:commandButton id="idCmdAddHorarioTratamento"
					actionListener="#{atendimentoBean.adicionarHorarioTratamento}"
					process="@this, :frmAtendimento:idTxtHorarioTratamento"
					update=":frmAtendimento:growMessage, :frmAtendimento:idDtbHorarios, :frmAtendimento:idTxtHorarioTratamento" 
					ajax="true"
					value="#{messageBundle['label.generic.button.add']}"
					icon="ui-icon-plus" style="margin:0" oncomplete="fixarMascara();" />
			</h:panelGroup>	
		<h:panelGrid />
	
		<p:dataTable id="idDtbHorarios" var="item"
				value="#{atendimentoBean.tratamento.listaHorarios}" rendered="true"
				emptyMessage="Sem horários." style="height:300px;">	
				<p:column>	
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.generic.column.action']}" />
					</f:facet>
					<p:commandLink onclick="modalExcluirHorarioTratamento('${item.horaMinuto}')" title="Excluir" >
						<h:graphicImage
							url="/#{atendimentoBean.urlImage}/crud/delete.jpg"
							width="15" height="15" alt="Excluir" />
					</p:commandLink>
				</p:column>	
				<p:column style="width:200px;">
					<f:facet name="header">
						<h:outputText value="Horário do Tratamento" />
					</f:facet>
					<h:outputText value="#{item.horaMinuto}" />
				</p:column>
		</p:dataTable>	
		<p:panelGrid columns="1"
				style="width:100%;text-align:right !important;padding-right:0px;">
				<h:panelGroup>
					<p:commandButton
						value="#{messageBundle['label.generic.button.close']}"
						type="button" onclick="modalHorariosTratamento.hide();" />
				</h:panelGroup>
			</p:panelGrid>
		</h:panelGrid>
	</p:dialog>
	
	<p:confirmDialog id="idDlgExcluir"
		message="#{messageBundle['label.contrato.confirmDialog.delete.tratamento.title']}"
		header="Confirma exclusão ?" severity="alert" widgetVar="excluirTratamento">
		<p:commandButton id="idCmdExcluirTratamentoSim"
			value="#{messageBundle['label.generic.button.yes']}"
			partialSubmit="true" process="@this, frmAtendimento:txtIdTratamento"
			update=":frmAtendimento:growMessage, frmAtendimento:txtIdTratamento, frmAtendimento:idTabContrato:idDtbTratamento"
			oncomplete="excluirTratamento.hide()"
			actionListener="#{atendimentoBean.excluirTratamento}" />
		<p:commandButton id="idCmdExcluirTratamentoNao"
			value="#{messageBundle['label.generic.button.no']}"
			onclick="excluirTratamento.hide()" type="button" ajax="false" immediate="true" />
	</p:confirmDialog>

	<p:confirmDialog id="idDlgExcluirHorario"
		message="Confirma a exclusão do horário ?" header="Confirma exclusão ?"
		severity="alert" widgetVar="excluirHorario">
		<p:commandButton id="idCmdExcluirHorarioSim"
			value="#{messageBundle['label.generic.button.yes']}"
			partialSubmit="true" process="@this, frmAtendimento:txtIdHorario"
			update=":frmAtendimento:growMessage, frmAtendimento:idPgdCamposHorario"
			oncomplete="excluirHorario.hide();fixarMascara();"
			actionListener="#{atendimentoBean.excluirHorarioTratamento}" />
		<p:commandButton id="idCmdExcluirHorarioNao"
			value="#{messageBundle['label.generic.button.no']}"
			onclick="excluirHorario.hide()" type="button" ajax="false"
			immediate="true" />
	</p:confirmDialog>
	     
		 
<p:dialog width="500" id="modalSelecionarDoenca"
		header="Selecionar Doenca" widgetVar="modalSelecionarDoenca" modal="true">
		<p:dataTable id="idDtbDoencasDisponiveis" var="item"
			value="#{atendimentoBean.listaDoencasDisponiveis}" emptyMessage="Não foram encontradas doenças !">
			<p:column id="colunaCodigoDoenca" style="width:150px;">
				<f:facet name="header">
					<h:outputText value="#{messageBundle['label.generic.field.codigo']}" />
				</f:facet>
				<h:outputText value="#{item.codigoCID}" />
			</p:column>
			<p:column id="colunaDescricaoDoenca" style="width:350px;">
				<f:facet name="header">
					<h:outputText value="#{messageBundle['label.generic.field.descricao']}" />
				</f:facet>
				<h:outputText value="#{item.nomeDoenca}" />
				
			</p:column>
			<p:column id="colunaAddDescricao" style="width:30px;"
				styleClass="alignCenter">
				<p:commandButton id="cmdAdicinonarDoenca"
					value="#{messageBundle['label.generic.button.add']}" 
					style="margin:0" actionListener="#{atendimentoBean.adicionarDoenca}"
					process="@this, :frmAtendimento:modalSelecionarDoenca"
					update=":frmAtendimento:growMessage, :frmAtendimento:idTabContrato:idDtbDoencasCliente"
					oncomplete="handleSelecionarDoencaRequest(xhr, status, args);">
					
					<f:param name="cidDoencaSelecionadaNaTab" value="#{item.codigoCID}" />
					<f:param name="nomeDoencaSelecionadaNaTab" value="#{item.nomeDoenca}" />
				</p:commandButton>
			</p:column>
		</p:dataTable>
	</p:dialog>		 
	
	<p:confirmDialog id="idDlgExcluirDoencaSelecionado"
		message="Confirma a exclusão da doença selecionada ?"
		header="#{messageBundle['label.generic.confirm.delete']}" severity="alert" widgetVar="excluirDoencaSelecionado">
		<p:commandButton id="idCmdExcluirDoencaSim"
			value="#{messageBundle['label.generic.button.yes']}"
			partialSubmit="true" process="@this, frmAtendimento:idTxtIdDoenca"
			update=":frmAtendimento:growMessage, frmAtendimento:idTxtIdDoenca, frmAtendimento:idTabContrato:idDtbDoencasCliente"
			oncomplete="excluirDoencaSelecionado.hide()"
			actionListener="#{atendimentoBean.excluirDoencaCliente}" />
		<p:commandButton id="idCmdExcluirDoencaNao"
			value="#{messageBundle['label.generic.button.no']}"
			onclick="excluirDoencaSelecionado.hide()" type="button" ajax="false"
			immediate="true" />
	</p:confirmDialog>		
		 
</html>
