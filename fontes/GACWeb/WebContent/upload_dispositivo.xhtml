<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<style type="text/css">
</style>
		<script language="javascript">
				
		</script>
	</h:head>

	<h:body>
		<h:form id="frmUpload">

			<p:growl id="growMessage" showDetail="false" sticky="false" />
			<ui:include src="inc/cabecalho.xhtml" />
			<h:panelGrid id="separador1" border="0"></h:panelGrid>

			<div align="center" style="width: '100%;'">
				<h:panelGrid id="idPgdPrincipal" width="800px;">

					<!-- Dados de entrada e consulta -->
					<p:panelGrid id="idPgdDados" columns="1" style="width:800px;">

						<p:fileUpload fileUploadListener="#{uploadDispositivoBean.upload}"
							mode="advanced" update="growMessage, idDtbArquivo" auto="false"
							uploadLabel="#{messageBundle['label.uploaddispositivo.button.upload']}"
							cancelLabel="#{messageBundle['label.uploaddispositivo.button.cancel']}"
							label="#{messageBundle['label.uploaddispositivo.button.select']}"
							required="true"
							requiredMessage="#{messageBundle['message.uploaddispositivo.file.required']}" />


					</p:panelGrid>

					<!-- Barra de botÃµes -->
					<p:panelGrid columns="1"
						style="width:100%;text-align:right !important;">
						<h:panelGroup>

							<p:commandButton
								value="#{messageBundle['label.generic.button.close']}"
								icon="ui-icon-circle-close" style="margin:0" immediate="true"
								ajax="false" action="#{uploadDispositivoBean.retornarMenuPrincipal}" />
						</h:panelGroup>
					</p:panelGrid>

					<!-- Tabela de resultados -->
					<p:dataTable id="idDtbArquivo" var="item"
						value="#{uploadDispositivoBean.listaArquivos}" rendered="true"
						emptyMessage="#{messageBundle['message.uploaddispositivo.datatable.empty']}">

						<p:column>
							<f:facet name="header">
								<h:outputText
									value="#{messageBundle['label.uploaddispositivo.datatable.column.1']}" />
							</f:facet>
							<h:outputText value="#{item.dataEnvio}">
								<f:convertDateTime pattern="dd/MM/yyyy" locale="pt_BR" />
							</h:outputText>
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText
									value="#{messageBundle['label.uploaddispositivo.datatable.column.2']}" />
							</f:facet>
							<h:outputText value="#{item.caminho}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText
									value="#{messageBundle['label.uploaddispositivo.datatable.column.3']}" />
							</f:facet>
							<h:outputText value="#{item.status}" />
						</p:column>

					</p:dataTable>
					
					<!-- Tabela de criticas -->
					<p:dataTable id="idDtbCriticas" var="item"
						value="#{uploadDispositivoBean.listaArquivos}" rendered="true"
						emptyMessage="#{messageBundle['message.uploaddispositivo.datatable.empty']}">

						<p:column>
							<f:facet name="header">
								<h:outputText
									value="#{messageBundle['label.uploaddispositivo.datatable.criticas.column.1']}" />
							</f:facet>
							<h:outputText value="#{item.dataEnvio}">
								<f:convertDateTime pattern="dd/MM/yyyy" locale="pt_BR" />
							</h:outputText>
						</p:column>

					</p:dataTable>
				</h:panelGrid>
			</div>
		</h:form>
	</h:body>
</f:view>
</html>

