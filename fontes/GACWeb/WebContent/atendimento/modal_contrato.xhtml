<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


	<p:dialog id="modalContrato"
		header="#{messageBundle['label.atendimento.header.modal.contrato']}"
		widgetVar="modalContrato" modal="true" >
	
		<h:panelGrid columns="1" id="idPgdCamposContrato" cellpadding="0"
			style="width:100%;">			
			<p:tabView id="idTabContrato" style="width:1024px;height:450px" >
				<p:tab id="idContrato" title="#{messageBundle['label.contrato.tabview.tabContrato.contrato']}"  >
					<h:panelGrid columns="2" cellpadding="0" style="width:100%;">
						<h:panelGrid columns="3">
							<h:outputLabel value="#{messageBundle['label.contrato.field.numerocontrato']}" styleClass="text-bold" />									
							<h:outputLabel value="#{messageBundle['label.contrato.field.cpfcontratante']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.contrato.field.rgcontratante']}" styleClass="text-bold" />
							<p:inputText id="idTxtNumeroContrato" maxlength="10" style="width:100px;" disabled="true" value="#{atendimentoBean.contrato.numeroContrato}"/>										
							<p:inputText id="idTxtPedido" 
								value="#{atendimentoBean.contrato.contratante.cpfContratante}"
								style="width:110px;" styleClass="cpfMask"  
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cpfcontratante.required']}" 
								validatorMessage="#{messageBundle['message.contrato.field.cpfcontratante.invalid']}">
									<f:validator validatorId="cpfValidator"/>
								</p:inputText>												
							<p:inputText id="idTxtRgContrato" maxlength="9" 
								value="#{atendimentoBean.contrato.contratante.rgContratante}" 
								style="width:115px;" 
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.rgcontratante.required']}" />											
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:outputLabel value=""  styleClass="text-bold" />
							<h:outputLabel value=""  styleClass="text-bold" />
						</h:panelGrid>
					</h:panelGrid>
					<h:panelGrid columns="1" cellpadding="5" style="width:100%;">							
							<h:panelGrid columns="3">
								<h:outputLabel value="#{messageBundle['label.contrato.field.datainiciovalidade']}"
									styleClass="text-bold" />
								<h:outputLabel value="#{messageBundle['label.contrato.field.datafimvalidade']}"
									styleClass="text-bold" />
								<h:outputLabel value="#{messageBundle['label.contrato.field.datasuspensao']}" styleClass="text-bold" />
								<p:calendar  value="#{atendimentoBean.contrato.dtInicioValidade}"
									showButtonPanel="true" navigator="true"										
									mode="popup" id="idTxtDataInicioValidade" pattern="dd/MM/yyyy" 
									locale="#{atendimentoBean.locale}"
									required="true"
									mindate="#{atendimentoBean.dataMinimaInicioValidade}"
									requiredMessage="#{messageBundle['message.contrato.field.datainiciovalidade.required']}" 
									converterMessage="#{messageBundle['message.contrato.field.datainiciovalidade.invalid']}"/>										
										
								<p:calendar value="#{atendimentoBean.contrato.dtFinalValidade}"
											showButtonPanel="true" navigator="true"
											mindate="#{atendimentoBean.dataAtual}"									
											mode="popup" id="idTxtDataFinalValidade" pattern="dd/MM/yyyy" 
											locale="#{atendimentoBean.locale}"
											converterMessage="#{messageBundle['message.contrato.field.datafimvalidade.invalid']}"/>
								<p:calendar value="#{atendimentoBean.contrato.dtSuspensao}"
											showButtonPanel="true" navigator="true"										
											mindate="#{atendimentoBean.dataAtual}"										
											mode="popup" id="idTxtDataSuspensao" pattern="dd/MM/yyyy" 
											locale="#{atendimentoBean.locale}" 
											converterMessage="#{messageBundle['message.contrato.field.datasuspensao.invalid']}" />
							</h:panelGrid>

							<h:panelGrid columns="1">
								<h:outputLabel value="#{messageBundle['label.contrato.field.pacoteservico']}"
									styleClass="text-bold" />
								<p:selectOneMenu id="idCmbServico" value="#{atendimentoBean.contrato.pacoteServico.idPacote}" style="width:350px;" 
									validatorMessage="#{messageBundle['message.contrato.field.pacoteservico.required']}">
									<f:selectItem itemValue="0" itemLabel="Selecione..."/>
									<f:selectItems value="#{atendimentoBean.listaServicos}"/>
									<f:validator validatorId="comboRequiredValidator"/>										
								</p:selectOneMenu>
							</h:panelGrid>
						</h:panelGrid>				
				</p:tab>		
				
				<p:tab  id="idTabClienteBase" title="#{messageBundle['label.contrato.tabview.tabContrato.clientebase']}"
							style="width:99.5%;">
					<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
						<h:panelGrid columns="3">
							<h:outputLabel value="#{messageBundle['label.contrato.field.cpfcliente']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.contrato.field.rgcliente']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.contrato.field.nomecliente']}" styleClass="text-bold" />
							<p:inputText id="idTxtCpfCliente"
								value="#{atendimentoBean.contrato.cliente.cpf}"
								style="width:150px;" styleClass="cpfMask"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cpfcliente.required']}" 
								validatorMessage="#{messageBundle['message.contrato.field.cpfcliente.invalid']}" 
								disabled="#{atendimentoBean.crud == 'U'}">
									<f:validator validatorId="cpfValidator" />
							</p:inputText>		
							<p:inputText id="idTxtRgCliente" 
								maxlength="14"
								value="#{atendimentoBean.contrato.cliente.rg}"
								style="width:150px;" 
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.rgpacliente.required']}" />										
							<p:inputText id="idTxtNomeCliente" 
								maxlength="60"
								value="#{atendimentoBean.contrato.cliente.nome}"
								style="width:648px;" 
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.nomecliente.required']}" />
						</h:panelGrid>
						
						<h:panelGrid columns="2">
							<h:outputLabel value="#{messageBundle['label.generic.field.endereco']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.bairro']}" styleClass="text-bold" />
							<p:inputText id="idTxtEnderecoCliente" 
								maxlength="60"
								value="#{atendimentoBean.contrato.cliente.endereco.endereco}"
								style="width:477px;"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.enderecocliente.required']}" />
							<p:inputText id="idTxtBairroCliente"
								maxlength="60" 
								value="#{atendimentoBean.contrato.cliente.endereco.bairro}"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.bairrocliente.required']}"										
								style="width:485px;" />
						</h:panelGrid>
						
						<h:panelGrid columns="4">
							<h:outputLabel value="#{messageBundle['label.generic.field.cidade']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.uf']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.cep']}" styleClass="text-bold" />
							<h:outputLabel value="#{messageBundle['label.generic.field.sexo']}" styleClass="text-bold" />
							<p:inputText id="idTxtCidadeCliente" 
								maxlength="60"
								value="#{atendimentoBean.contrato.cliente.endereco.cidade}"	
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cidadecliente.required']}"									
								style="width:477px;" />
							<p:selectOneMenu id="idComboUfCliente" 
								value="#{atendimentoBean.contrato.cliente.endereco.uf}" style="width:150px;" 
								validatorMessage="#{messageBundle['message.contrato.field.ufcliente.required']}">
								<f:selectItem itemValue="0" itemLabel="Selecione..."/>
								<f:selectItems value="#{atendimentoBean.listaUf}"/>
								<f:validator validatorId="comboRequiredValidator"/>	
							</p:selectOneMenu>
							<p:inputText id="idTxtCepCliente" 
								value="#{atendimentoBean.contrato.cliente.endereco.cep}"										
								style="width:100px;" styleClass="cepMask"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.cepcliente.required']}"/>
							<p:selectOneMenu id="idCboSexoCliente" 
								value="#{atendimentoBean.contrato.cliente.sexo}" 
								style="width:150px;"
								validatorMessage="#{messageBundle['message.contrato.field.sexocliente.required']}">
								<f:selectItem itemValue="0" itemLabel="Selecione..."/>
								<f:selectItems value="#{atendimentoBean.listaSexo}"/>	
								<f:validator validatorId="comboRequiredValidator"/>												
							</p:selectOneMenu>
						</h:panelGrid>
						
						<h:panelGrid columns="2">									
							<h:outputLabel value="#{messageBundle['label.generic.field.datanascimento']}" styleClass="text-bold" />
							<h:outputLabel value=" " />
							<p:calendar 
								value="#{atendimentoBean.contrato.cliente.dataNascimento}"
								showButtonPanel="true" navigator="true"										
								mode="popup" id="idTxtDataNascimentoCliente" pattern="dd/MM/yyyy" 
								yearRange="1912"
								locale="#{atendimentoBean.locale}"
								required="true"
								requiredMessage="#{messageBundle['message.contrato.field.datanascimentocliente.required']}"
								converterMessage="#{messageBundle['message.generic.field.datanascimento.invalid']}" />
								<p:commandButton id="idCmdModalFormaContatoCliente" value="Formas de Contato" onclick="modalFormaContatoCliente.show();" type="button"/>						
						</h:panelGrid>

						<h:panelGrid columns="1">
							<h:outputLabel 
								value="#{messageBundle['label.contrato.field.necessidadesespeciais']}"
								styleClass="text-bold" />
							<p:inputTextarea rows="5" 
								value="#{atendimentoBean.contrato.cliente.necessidadeEspecial}"
								style="width:975px;" />
						</h:panelGrid>
							<h:panelGrid columns="2" columnClasses="alignLeftTop, nothing">
							<h:outputLabel 
								value="#{messageBundle['label.contrato.field.planosaude']}" 
								styleClass="text-bold" />
							<h:outputLabel 
								value="#{messageBundle['label.contrato.field.cobertura']}"  
								styleClass="text-bold" />
							<p:inputText id="idTxtPlanoSaude" 
								value="#{atendimentoBean.contrato.cliente.planoSaude}"
								maxlength="60"
								style="width:500px;" />
							<p:inputTextarea rows="5" 
								value="#{atendimentoBean.contrato.cliente.cobertura}"
								style="width:460px;" />
						</h:panelGrid>								
					</h:panelGrid>
				</p:tab>	
				
				<p:tab id="idTabClienteDoenca" title="#{messageBundle['label.contrato.tabview.tabContrato.doencas']}"
							style="width:1024px;">							
					<h:panelGrid columns="1" cellpadding="0">
						<h:panelGrid columns="2" columnClasses="nothing, alignLeft" border="0">
							<h:outputLabel value="#{messageBundle['label.contrato.field.filtrodoenca']}" styleClass="text-bold" />
							<h:outputLabel value="" />
							<p:inputText id="idTxtFiltroDoencas" value="#{atendimentoBean.filtroDoenca}" style="width:600px;" />
							<p:commandButton id="idCmdFiltrarDoenca"
									ajax="true"
									value="#{messageBundle['label.generic.button.filter']}"
									icon="ui-icon-search" 
									style="margin:0"										
									actionListener="#{atendimentoBean.obterPickListDoencas}" 
									update=":frmAtendimento:growMessage, :frmAtendimento:idTabContrato:idPgdPickList" 
									process="@this, :frmAtendimento:idTabContrato:idPklListaDoencas, :frmAtendimento:idTabContrato:idTxtFiltroDoencas"/>										
						</h:panelGrid>

						<h:panelGrid border="0" id="idPgdPickList">
							<p:pickList id="idPklListaDoencas" 
								value="#{atendimentoBean.pickListDoencas}" styleClass="noBorder"
								style="border:none; border-width: 0 !important;width:300px;" var="item"
								itemValue="#{item}" 
								itemLabel="#{item.nomeDoenca}"
								converter="pickListDoencaConverter" >
									<f:facet name="sourceCaption">#{messageBundle['label.contrato.picklist.doencas.source']}</f:facet>
									<f:facet name="targetCaption">#{messageBundle['label.contrato.picklist.doencas.target']}</f:facet>
							</p:pickList>
						</h:panelGrid>
					</h:panelGrid>							
				</p:tab>			
			</p:tabView>
						
			<!-- Barra de botões -->
			<h:panelGrid columns="1" id="idPanelGridBarraBotoesContrato"
				style="width:100%;text-align:right !important;padding-right:0px;">
				<h:panelGroup>
					<p:commandButton id="cmdSalvarDadosContrato"
						value="#{messageBundle['label.generic.button.save']}"
						icon="ui-icon-check" style="margin:0"
						actionListener="#{contratoBean.salvarContrato}"/>
					<h:outputLabel />
					<p:commandButton
						value="#{messageBundle['label.generic.button.close']}"
						icon="ui-icon-circle-close" style="margin:0" ajax="false"								
						type="button"
						onclick="modalContrato.hide()"/>
				</h:panelGroup>
			</h:panelGrid>
			<h:panelGrid></h:panelGrid>			
		</h:panelGrid>
	</p:dialog>


	<p:dialog id="modalFormaContatoCliente"
		header="Formas de contato com o cliente"
		widgetVar="modalFormaContatoCliente" modal="true"
		onShow="displayTelefoneEmailCliente(1);" width="600">
	
		<h:panelGrid columns="1" id="idPgdCamposFormaContatoCliente"
			cellpadding="0" style="width:100%;">
			<h:inputHidden id="txtIdFormaContatoCliente"
				value="#{atendimentoBean.formaContato.idFormaContato}" />
			<h:panelGrid columns="3" id="idPgdGrupoCamposFormaContatoCliente1"
				border="0">
				<h:outputLabel
					value="#{messageBundle['label.generic.field.contato.tipo']}"
					styleClass="text-bold" />
				<h:outputLabel id="idLblFormaContatoClienteTelefone"
					value="#{messageBundle['label.generic.field.telefone']}"
					styleClass="text-bold" />
				<h:outputLabel id="idLblFormaContatoClienteEmail"
					value="#{messageBundle['label.generic.field.email']}"
					styleClass="text-bold" />
				<p:selectOneMenu id="idCmbTipoFormaContatoCliente"
					style="width:180px;"
					value="#{atendimentoBean.formaContato.tipoContato}"
					onchange="displayTelefoneEmailCliente(this.value)">
					<f:selectItems value="#{atendimentoBean.listaFormaContato}" />
				</p:selectOneMenu>
	
				<p:inputText id="idTxtFormaContatoClienteTelefone"
					value="#{atendimentoBean.formaContato.telefone}" style="width:140px;"
					styleClass="telefoneFixoMask" />
	
				<p:inputText id="idTxtFormaContatoClienteEmail"
					value="#{atendimentoBean.formaContato.email}" style="width:300px;" />
	
			</h:panelGrid>
	
			<h:panelGrid columns="1"
				style="width:99.5%;text-align:right !important;padding-right:0px;">
				<p:commandButton value="#{messageBundle['label.generic.button.add']}"
					icon="ui-icon-plus" style="margin:0"
					process=":frmAtendimento:idPgdCamposFormaContatoCliente"
					ajax="true"
					actionListener="#{atendimentoBean.adicionarFormaContatoCliente}"
					update="@this, :frmAtendimento:growMessage, :frmAtendimento:idPgdCamposFormaContatoCliente"
					oncomplete="fixarMascara();updateFormContatoCliente();" />
				<f:event listener="#{atendimentoBean.validarPreenchimentoCamposFormaContatoCliente}"
					type="preValidate" />
			</h:panelGrid>
	
			<p:dataTable id="idDtbFormaContatoCliente" var="item"
				value="#{atendimentoBean.contrato.cliente.listaFormaContato}"
				rendered="true"
				emptyMessage="#{messageBundle['message.contrato.datatable.formacontato.empty']}">
	
				<p:column id="modelHeader" style="width:100px;">
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.generic.column.action']}" />
					</f:facet>
					<h:panelGrid columns="3"
						columnClasses="noBorder, noBorder, noBorder">
	
						<p:commandLink title="Novo" ajax="true" partialSubmit="true"
							process="@this"
							update=":frmAtendimento:idPgdGrupoCamposFormaContatoCliente1, :frmAtendimento:txtIdFormaContatoCliente"
							actionListener="#{atendimentoBean.novaFormaContato}" immediate="true"
							oncomplete="$('.ui-state-error').removeClass('ui-state-error');fixarMascara(); displayTelefoneEmailCliente(1);">
							<h:graphicImage
								url="/#{atendimentoBean.urlImage}/crud/greencross-25x25.jpg"
								width="15" height="15" alt="Novo" />
						</p:commandLink>
	
						<p:commandLink title="Editar" ajax="true" partialSubmit="true"
							process="@this, :frmAtendimento:idPgdGrupoCamposFormaContatoCliente1"
							update=":frmAtendimento:growMessage, :frmAtendimento:idPgdGrupoCamposFormaContatoCliente1, :frmAtendimento:txtIdFormaContatoCliente"
							actionListener="#{atendimentoBean.editarFormaContatoCliente}"
							oncomplete="$('.ui-state-error').removeClass('ui-state-error');updateFormContatoCliente();fixarMascara();">
							<f:param name="idFormaContatoCliente"
								value="#{item.idFormaContato}" />
							<h:graphicImage
								url="/#{atendimentoBean.urlImage}/crud/edit-pen-25x25.jpg" width="15"
								height="15" alt="Editar" />
						</p:commandLink>
	
						<p:commandLink
							onclick="modalExcluirFormaContatoCliente('${item.idFormaContato}');"
							title="Excluir">
							<h:graphicImage url="/#{atendimentoBean.urlImage}/crud/delete.jpg"
								width="15" height="15" alt="Excluir" />
						</p:commandLink>
					</h:panelGrid>
				</p:column>
	
				<p:column>
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.contrato.datatable.formacontato.column.1']}" />
					</f:facet>
					<h:outputText value="#{item.tipoContato}">
						<f:converter converterId="formaContatoConverter" />
					</h:outputText>
				</p:column>
	
				<p:column style="width:200px;">
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.contrato.datatable.formacontato.column.2']}" />
					</f:facet>
					<h:outputText value="#{item.telefone}" >
						<f:converter converterId="telefoneConverter"/>
					</h:outputText>
				</p:column>
	
				<p:column style="width:200px;">
					<f:facet name="header">
						<h:outputText
							value="#{messageBundle['label.contrato.datatable.formacontato.column.3']}" />
					</f:facet>
					<h:outputText value="#{item.email}" />
				</p:column>
	
			</p:dataTable>
	
			<p:panelGrid columns="1"
				style="width:100%;text-align:right !important;padding-right:0px;">
				<h:panelGroup>
					<p:commandButton
						value="#{messageBundle['label.generic.button.close']}"
						type="button" onclick="modalFormaContatoCliente.hide();" />
				</h:panelGroup>
			</p:panelGrid>
		</h:panelGrid>
	</p:dialog>
	
	<p:confirmDialog id="idDlgExcluirFormaContatoCliente"
		message="#{messageBundle['message.generic.confirmDialog.delete.formacontato.title']}"
		header="Confirma exclusão ?" severity="alert"
		widgetVar="excluirFormaContatoCliente">
		<p:commandButton id="idCmdExcluirFormaContatoClienteSim"
			value="#{messageBundle['label.generic.button.yes']}"
			partialSubmit="true"
			process="@this, frmAtendimento:txtIdFormaContatoCliente"
			update=":frmAtendimento:growMessage, frmAtendimento:txtIdFormaContatoCliente, frmAtendimento:idDtbFormaContatoCliente"
			oncomplete="excluirFormaContatoCliente.hide()"
			actionListener="#{atendimentoBean.excluirFormaContatoCliente}" />
		<p:commandButton id="idCmdExcluirFormaContatoClienteNao"
			value="#{messageBundle['label.generic.button.no']}"
			onclick="excluirFormaContatoCliente.hide()" type="button" ajax="false"
			immediate="true" />
	</p:confirmDialog>
     
</html>
