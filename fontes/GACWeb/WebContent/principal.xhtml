<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>

	<h:head>
		<style type="text/css">
		</style>
		<script>			
			function imprimirNoFramePadrao(formulario) {				
				dlgRelatorio.show();
				$(formulario).prop("target", "relatorioIframe");
			} 	
		
			function printIframe() { 
				window.frames['relatorioIframe'].focus();
		        window.frames['relatorioIframe'].print(); 				
			}
		
			function closeIframe() { 
				$('#relatorioIframe').attr('src', "http://www.andyjacobson.com/wp-content/uploads/2011/06/processing.gif")				
			}
			
		</script>
	</h:head>	
	
	<h:body onload="wdgLogin.show();">
		
		<h:form >		
			<ui:include src="inc/cabecalho.xhtml"  />
			
		    <p:menubar styleClass="menu-bar"  >
		        <p:submenu  label="#{messageBundle['label.menu.item.cadastros']}" icon="ui-icon-document"  >		            
		            <p:menuitem  value="#{messageBundle['label.menu.item.usuario']}" action="#{menuBean.invokarPagina}" ajax="false" title="#{messageBundle['label.menu.item.usuario']}"  rendered="#{menuBean.verificarPermissaoPerfil(2)}">
		            		<f:param name="codigoModulo" value="2"/>	
		            </p:menuitem>
		           
		            <p:menuitem value="#{messageBundle['label.menu.item.parametros']}" action="#{menuBean.invokarPagina}"  ajax="false"  title="#{messageBundle['label.menu.item.parametros']}" rendered="#{menuBean.verificarPermissaoPerfil(6)}">
		            	<f:param name="codigoModulo" value="6"/>
		            </p:menuitem>
		            
		            <p:menuitem value="#{messageBundle['label.menu.item.pacotesoferecidos']}" action="#{menuBean.invokarPagina}" ajax="false" title="#{messageBundle['label.menu.item.pacotesoferecidos']}" rendered="#{menuBean.verificarPermissaoPerfil(10)}">
		            	<f:param name="codigoModulo" value="10"/>
		            </p:menuitem> 
		            
		            <p:menuitem value="#{messageBundle['label.menu.item.smspadrao']}" action="#{menuBean.invokarPagina}" ajax="false" title="#{messageBundle['label.menu.item.smspadrao']}" rendered="#{menuBean.verificarPermissaoPerfil(70)}">
		            	<f:param name="codigoModulo" value="70"/>
		            </p:menuitem>
		            
		            <p:menuitem value="#{messageBundle['label.menu.item.scriptatendimento']}" action="#{scriptAtendimentoBean.iniciarPagina}" ajax="false" title="#{messageBundle['label.menu.item.scriptatendimento']}" rendered="#{menuBean.verificarPermissaoPerfil(4)}">
		            	<f:param name="codigoModulo" value="4"/>
		            </p:menuitem>	
		            	           
					<p:submenu label="Dispositivos" rendered="#{(menuBean.verificarPermissaoPerfil(5) || menuBean.verificarPermissaoPerfil(3) || menuBean.verificarPermissaoPerfil(8))}">
						<p:menuitem value="#{messageBundle['label.menu.item.cadastrodispositivo']}" action="#{cadastroDispositivoBean.iniciarPagina}" ajax="false" title="#{messageBundle['label.menu.item.cadastrodispositivo']}" rendered="#{menuBean.verificarPermissaoPerfil(3)}">
							<f:param name="codigoModulo" value="3"/>	
						</p:menuitem>		       			
		       			<p:menuitem value="#{messageBundle['label.menu.item.cargainicial']}" action="#{uploadDispositivoBean.iniciarPagina}" ajax="false" title="#{messageBundle['label.menu.item.cargainicial']}" rendered="#{menuBean.verificarPermissaoPerfil(8)}" />
		       			<p:menuitem value="#{messageBundle['label.menu.item.movimentacao']}" action="#{inventarioDispositivoBean.iniciarPagina}" ajax="false" title="#{messageBundle['label.menu.item.movimentacao']}" rendered="#{menuBean.verificarPermissaoPerfil(5)}" />
		       		</p:submenu>
		       		<p:menuitem value="#{messageBundle['label.menu.item.contratos']}" action="#{menuBean.invokarPagina}" ajax="false" title="#{messageBundle['label.menu.item.contratos']}" rendered="#{menuBean.verificarPermissaoPerfil(7)}">
		       			<f:param name="codigoModulo" value="7"/>
		       		</p:menuitem>
		        </p:submenu>
		       
		         <p:submenu label="#{messageBundle['label.menu.item.atendimento']}" icon="ui-icon-document"  url="underconstruct.xhtml" rendered="#{menuBean.verificarPermissaoPerfil(0)}" />
  				 
  				 <p:submenu label="Relatórios" icon="ui-icon-document" >
		         	<p:menuitem value="Desempenho Comercial" onclick="wdgRelatorioDesempenhoComercial.show()" title="Desempenho Comercial"/>
		         	<p:menuitem value="Dispositivos por estado" onclick="wdgDispositivoEstadoReport.show();" title="Dispositivos por estado"/>
		         	<p:menuitem value="Histórico de Dispositivos" onclick="wdgRelatorioHistoricoDispositivo.show()" title="Histótico de Dispositivos"/>
		         </p:submenu>
		         
		         <p:menuitem value="#{messageBundle['label.menu.item.sair']}" action="#{menuBean.logoff}" ajax="false" title="#{messageBundle['label.menu.item.sair']}" /> 		         		         
		         		  
		    </p:menubar>
		    		    
		    <!-- Dock menu -->
			<p:dock>
				<p:menuitem value="#{messageBundle['label.menu.item.usuario']}" ajax="false" icon="primefaces-smartangel/images/dock/users.png"  action="#{menuBean.invokarPagina}" >
					<f:param name="codigoModulo" value="2"/>
				</p:menuitem>
				<p:menuitem value="#{messageBundle['label.menu.item.parametros']}"  ajax="false" icon="primefaces-smartangel/images/dock/parametros.png" action="#{parametrosBean.iniciarPagina}" />
				<p:menuitem value="#{messageBundle['label.menu.item.pacotesoferecidos']}" icon="primefaces-smartangel/images/dock/servico2.png" action="#{pacotesOferecidosBean.iniciarPagina}" />
				<p:menuitem value="#{messageBundle['label.menu.item.smspadrao']}" icon="primefaces-smartangel/images/dock/sms.png" ajax="false" action="#{smsPadraoBean.iniciarPagina}" />
				<p:menuitem value="{messageBundle['label.menu.item.contratos']}" icon="primefaces-smartangel/images/dock/contrato.png" url="#" />				
			</p:dock>	
		</h:form>

		<!-- Modal relatorio de desempenho comercial RDC -->			
		<p:dialog id="idModalRelatorioDesempenhoComercial" header="Desempenho Comercial" widgetVar="wdgRelatorioDesempenhoComercial"
			rendered="true" modal="true">			
			<p:messages id="messagesDesempenhoComercial" showDetail="false" autoUpdate="true"/>
			<h:form id="formRDC">						
				<h:panelGrid columns="1" border="0" columnClasses="alignLeftTop" style="width:300px;">
					<p:panelGrid columns="1" id="idPanelCampos" style="width:300px;">						
						<h:panelGrid id="idPgdAgrupamentoCampos" columns="2" columnClasses="noBorder, noBorder">					
							<h:outputLabel for="idCmbMes" value="Mês" styleClass="text-bold"/>
							<h:outputLabel for="idSpinAno" value="Ano" styleClass="text-bold"/>							
					         <p:selectOneMenu id="idCmbMes" value="#{menuBean.filtroMesReferencia}"  >  
							       <f:selectItem itemLabel="Janeiro" itemValue="1" />
							       <f:selectItem itemLabel="Fevereiro" itemValue="2" />
							       <f:selectItem itemLabel="Março" itemValue="3" />
							       <f:selectItem itemLabel="Abril" itemValue="4" />
							       <f:selectItem itemLabel="Maio" itemValue="5" />
							       <f:selectItem itemLabel="Junho" itemValue="6" />
							       <f:selectItem itemLabel="Julho" itemValue="7" />
							       <f:selectItem itemLabel="Agosto" itemValue="8" />
							       <f:selectItem itemLabel="Setembro" itemValue="9" />
							       <f:selectItem itemLabel="Outubro" itemValue="10" />
							       <f:selectItem itemLabel="Novembro" itemValue="11" />
							       <f:selectItem itemLabel="Dezembro" itemValue="12" />  
							  </p:selectOneMenu>	
							  <p:spinner id="idSpinAno" size="4"  value="#{menuBean.filtroAnoReferencia}"/>
						</h:panelGrid>
					</p:panelGrid>
					
					<p:panelGrid columns="1" border="0" style="width:300px;" columnClasses="alignRightTop">
						<h:panelGroup>
							<p:commandButton id="idCmdProcessarRelatorioDesempenhoComercial"
								icon="ui-icon-print" style="margin:0"
								value="#{messageBundle['label.generic.button.execute']}"
								ajax="false" 
								process="@this"
								actionListener="#{menuBean.imprimirRelatorioDesempenhoComercial}"
								tabindex="0"  onclick="imprimirNoFramePadrao('#formRDC');wdgRelatorioDesempenhoComercial.hide();" />
																
							<h:outputLabel value="" />				
							<p:commandButton id="idCmdFecharRelatorioDesempenhoComercial" 
								icon="ui-icon-circle-close" style="margin:0"
								value="#{messageBundle['label.generic.button.close']}"								
								type="button"
								onclick="wdgRelatorioDesempenhoComercial.hide();" />						
							</h:panelGroup>
					</p:panelGrid>					
				</h:panelGrid>
				<h:panelGrid id="panelRodape">
					<h:outputLabel value="" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
			
		<!-- Modal Dispositivo Estado Resport (DER) -->		
		<p:dialog id="idModalDER"
			header="Dispositivos por Estado"
			widgetVar="wdgDispositivoEstadoReport"
			rendered="true" modal="true">
			<h:form id="formDER">
				<p:messages id="messagesDER" showDetail="false"	autoUpdate="true" />
				<h:panelGrid columns="1" border="0" columnClasses="alignLeftTop" style="width:300px;">					
					<p:panelGrid id="idPgdBotoesDER" columns="1" border="0" style="width:300px;" columnClasses="alignRightTop">
						<h:panelGroup id="idPgpBotoesDER">
							<p:commandButton id="idCmdImprimirDER"
								icon="ui-icon-print" style="margin:0"
								value="#{messageBundle['label.generic.button.execute']}"
								ajax="false" 
								process="@this"
								actionListener="#{menuBean.imprimirDispositivosPorEstado}"
								tabindex="0"  onclick="imprimirNoFramePadrao('#formDER');wdgDispositivoEstadoReport.hide();" />
								
							<h:outputLabel value="" />
							<p:commandButton id="idCmdFecharDER"
								icon="ui-icon-circle-close" style="margin:0"
								value="#{messageBundle['label.generic.button.close']}"
								type="button" tabindex="1"
								onclick="wdgDispositivoEstadoReport.hide();" />
						</h:panelGroup>
					</p:panelGrid>
				</h:panelGrid>
				<h:panelGrid id="panelRodapeDER">
					<h:outputLabel value="" />
				</h:panelGrid>
			</h:form>
		</p:dialog>		
		
		<!-- Modal histórico de dispositivos -->			
		<p:dialog id="idModalHistoricoDispositivo" header="Histórico de Dispositivos" widgetVar="wdgRelatorioHistoricoDispositivo"
			rendered="true" modal="true" >  
			<h:form id="formHDR">			
				<p:messages id="messagesHistoricoDispositivo" showDetail="false" autoUpdate="true"/>									
				<h:panelGrid columns="1" border="0" columnClasses="alignLeftTop" style="width:300px;">						
					<p:panelGrid columns="1" id="idPanelCamposHistoricoDispositivo1" style="width:380px;">						
						<h:panelGrid columnClasses="noBorder">
							<h:panelGrid id="idPgdAgrupamentoCamposHistoricoDispositivo" columns="2" columnClasses="noBorder, noBorder">					
								<h:outputLabel for="idDispositivo" value="ID Dispositivo" styleClass="text-bold"/>
								<h:outputLabel for="idLoginCliente" value="Cliente" styleClass="text-bold"/>
								<p:inputText id="idDispositivo" value="#{relatorioHistoricoDispositivoBean.relatorio.idDispositivo}"/> 								
								<p:inputText id="idLoginCliente" value="#{relatorioHistoricoDispositivoBean.relatorio.login}"/>
							</h:panelGrid>
							<h:panelGrid id="idPgdAgrupamentoCamposHistoricoDispositivo2" columns="2" columnClasses="noBorder, noBorder">	
								<h:outputLabel for="idCmbEstado" value="Estado" styleClass="text-bold"/>
								<h:outputText styleClass="text-bold" value="Data Movimentação" />		
								<p:selectOneMenu id="idCmbEstado"
									value="#{relatorioHistoricoDispositivoBean.relatorio.estadoDestino}" 
									style="width:145px;"
									validatorMessage="#{messageBundle['message.cadastrodispositivo.field.estado.required']}">
									<f:selectItem itemValue="0" itemLabel="Selecione..." />
									<f:selectItems value="#{relatorioHistoricoDispositivoBean.listaEstadoDispositivo}"/>										
								</p:selectOneMenu>
								<p:calendar value="#{relatorioHistoricoDispositivoBean.relatorio.dataMovimentacao}"
											mode="popup" id="idDataMovimentacao" pattern="dd/MM/yyyy"/>	
							</h:panelGrid>
						</h:panelGrid>
					</p:panelGrid>		
					<p:panelGrid id="idPgdBotoesHistoricoDispositivo" columns="1" border="0" style="width:380px;" columnClasses="alignRightTop">							
						<h:panelGroup id="idPgpBotoesHistoricoDispositivo">															
							<p:commandButton id="idCmdRelatorioHistoricoDispositivo"
								icon="ui-icon-print" style="margin:0"
								value="#{messageBundle['label.generic.button.execute']}"
								ajax="false" 
								process="@this"
								actionListener="#{relatorioHistoricoDispositivoBean.imprimirHistoricoDispositivos}"
								tabindex="0"  onclick="imprimirNoFramePadrao('#formHDR');wdgRelatorioHistoricoDispositivo.hide();" />																						
							<h:outputLabel value="" />
							<p:commandButton id="idCmdFecharRelatorioHistoricoDispositivo" 
								icon="ui-icon-circle-close" style="margin:0"
								value="#{messageBundle['label.generic.button.close']}"								
								type="button"
								tabindex="1"
								onclick="wdgRelatorioHistoricoDispositivo.hide();" />						
							</h:panelGroup>
					</p:panelGrid>							
				</h:panelGrid>
				<h:panelGrid id="panelRodapeRelatorioHistoricoDispositivo">
					<h:outputLabel value="" />
				</h:panelGrid>
			</h:form>						
		</p:dialog>			
		
		<!-- Frame para exibição dos relatórios. -->
		<p:dialog id="relatorioDialog" header="Relatório" widgetVar="dlgRelatorio" modal="true" 
			maximizable="true" width="800" height="500" draggable="false"  onHide="closeIframe();" >			
			<p:panelGrid id="idPgdBotoesIframeRelatorio" columns="1" columnClasses="alignRight" style="width:100%;"> 
				<p:commandButton type="button" onclick="printIframe();" value="Imprimir"/>
			</p:panelGrid>
			<h:panelGrid></h:panelGrid>
			<iframe id="relatorioIframe" src="#{menuBean.urlImage}/anime/processing.gif"  name="relatorioIframe" class="noBorder" style="width:100%;height:100%" scrolling="no" />						
		</p:dialog>  	

	</h:body>
</f:view>
</html>