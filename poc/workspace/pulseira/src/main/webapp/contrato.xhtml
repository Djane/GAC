<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<style type="text/css">
			.ui-picklist-list {
				width: 470px !important;
			}
		</style>
		<script language="javascript">
			function modalExcluirTratamento(parametro) {		
				$("#frmContrato\\:txtIdTratamento").val(parametro);		
				excluir.show();
			}			
			
			function modalExcluirContato(parametro) {		
				$("#frmContrato\\:txtIdContato").val(parametro);		
				excluirContato.show();
			}
			
		</script>
	</h:head>

	<h:body>
		<h:form id="frmContrato">

			<p:growl id="growMessage" showDetail="false" sticky="false" />
			<ui:include src="inc/cabecalho.xhtml" />
			<h:panelGrid id="separador1" border="0"></h:panelGrid>

			<div align="center" style="width: '100%;'">
				<h:inputHidden id="txtIdTratamento"
					value="#{contratoBean.tratamento.idTratamento}" />
				<h:inputHidden id="txtIdContato"
					value="#{contratoBean.contato.idContato}" />					
				<h:panelGrid id="idPgdPrincipal" style="width:1024px;"
					cellspacing="0">

					<p:tabView id="idTabContrato" style="width:1024px;">
						<p:tab id="tab1" title="#{messageBundle['label.contrato.tab.1']}">

							<h:panelGrid columns="2" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="3">
									<h:outputLabel value="Num. Contrato" styleClass="text-bold" />
									<h:outputLabel value="CPF Contratante" styleClass="text-bold" />
									<h:outputLabel value="RG Contratante" styleClass="text-bold" />
									<p:inputText id="idTxtNumeroContrato" style="width:150px;" />
									<p:inputText id="idTxtCpfContratante" style="width:150px;" styleClass="cpfMask"/>
									<p:inputText id="idTxtRgContrato" style="width:150px;" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="Nome Contratante" styleClass="text-bold" />
									<p:inputText style="width:478px;" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="Endereço" styleClass="text-bold" />
									<p:inputText style="width:477px;" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="Bairro" />
									<p:inputText style="width:478px;" styleClass="text-bold" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="Cidade" styleClass="text-bold" />
									<p:inputText style="width:477px;" />
								</h:panelGrid>
								<h:panelGrid columns="2">
									<h:outputLabel value="Estado" styleClass="text-bold" />
									<h:outputLabel value="CEP" styleClass="text-bold" />
									<p:selectOneMenu value="0" style="width:250px;">
										<f:selectItems value="#{contratoBean.listaUf}"/>
									</p:selectOneMenu>
									<p:inputText id="idTxtCepContratante" style="width:220px;" styleClass="cepMask"/>
								</h:panelGrid>
							</h:panelGrid>
							<h:panelGrid columns="1" cellpadding="5" style="width:100%;">
								<h:panelGrid columns="2">
									<h:outputLabel value="Data Nascimento" styleClass="text-bold" />
									<h:outputLabel value="Email" styleClass="text-bold" />
									<p:calendar value="#{contratoBean.dtNascimentoContratante}"
										mode="popup" id="idTxtDataNascimentoContratante" pattern="dd/MM/yyyy"/>
									<p:inputText style="width:500px;" />
								</h:panelGrid>

								<h:panelGrid columns="3">
									<h:outputLabel value="Data Inicio Validade"
										styleClass="text-bold" />
									<h:outputLabel value="Data Termino Validade"
										styleClass="text-bold" />
									<h:outputLabel value="Data Suspensão" styleClass="text-bold" />
									<p:calendar value="#{contratoBean.dtNascimentoContratante}"
										mode="popup" id="idTxtDataInicioValidade" pattern="dd/MM/yyyy" />
									<p:calendar value="#{contratoBean.dtNascimentoContratante}"
										mode="popup" id="idTxtDataFinalValidade" pattern="dd/MM/yyyy"/>
									<p:calendar value="#{contratoBean.dtNascimentoContratante}"
										mode="popup" id="idTxtDataSuspensaoe" pattern="dd/MM/yyyy"/>
								</h:panelGrid>

								<h:panelGrid columns="1">
									<h:outputLabel value="Pacote de Serviços"
										styleClass="text-bold" />
									<p:selectOneMenu value="0" style="width:350px;">
										<f:selectItem itemLabel="Selecione" itemValue="" />
										<f:selectItem itemLabel="Option 1" itemValue="1" />
										<f:selectItem itemLabel="Option 2" itemValue="2" />
										<f:selectItem itemLabel="Option 3" itemValue="3" />
									</p:selectOneMenu>
								</h:panelGrid>

								<h:panelGrid columns="2">
									<h:outputLabel value="Id do Dispositivo" styleClass="text-bold" />
									<h:outputLabel value="Id da Central" styleClass="text-bold" />
									<p:selectOneMenu value="0" style="width:350px;">
										<f:selectItem itemLabel="Selecione" itemValue="" />
										<f:selectItem itemLabel="Option 1" itemValue="1" />
										<f:selectItem itemLabel="Option 2" itemValue="2" />
										<f:selectItem itemLabel="Option 3" itemValue="3" />
									</p:selectOneMenu>
									<p:selectOneMenu value="0" style="width:350px;">
										<f:selectItem itemLabel="Selecione" itemValue="" />
										<f:selectItem itemLabel="Option 1" itemValue="1" />
										<f:selectItem itemLabel="Option 2" itemValue="2" />
										<f:selectItem itemLabel="Option 3" itemValue="3" />
									</p:selectOneMenu>
								</h:panelGrid>
							</h:panelGrid>

						</p:tab>
						<!-- Tab Cliente -->
						<p:tab id="idTabClienteBase" title="Cliente Base"
							style="width:99.5%;">

							<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="3">
									<h:outputLabel value="CPF Cliente" styleClass="text-bold" />
									<h:outputLabel value="RG Cliente" styleClass="text-bold" />
									<h:outputLabel value="Nome Cliente" styleClass="text-bold" />
									<p:inputText id="idTxtCpfCliente" style="width:150px;" styleClass="cpfMask"/>
									<p:inputText id="idTxtRgCliente" style="width:150px;" />
									<p:inputText id="idTxtNomeCliente" style="width:648px;" />
								</h:panelGrid>

								<h:panelGrid columns="2">
									<h:outputLabel value="Endereço" styleClass="text-bold" />
									<h:outputLabel value="Bairro" styleClass="text-bold" />
									<p:inputText id="idTxtEnderecoCliente" style="width:477px;" />
									<p:inputText id="idTxtBairroCliente" style="width:485px;" />
								</h:panelGrid>

								<h:panelGrid columns="4">
									<h:outputLabel value="Cidade" styleClass="text-bold" />
									<h:outputLabel value="Estado" styleClass="text-bold" />
									<h:outputLabel value="Cep" styleClass="text-bold" />
									<h:outputLabel value="Sexo" styleClass="text-bold" />
									<p:inputText id="idTxtCidadeCliente" style="width:477px;" />
									<p:selectOneMenu value="0" style="width:150px;">
										<f:selectItems value="#{contratoBean.listaUf}"/>
									</p:selectOneMenu>
									<p:inputText id="idTxtCepCliente" style="width:100px;" styleClass="cepMask" />
									<p:selectOneMenu id="idCboSexoCliente" value="0" style="width:150px;">
										<f:selectItems value="#{contratoBean.listaSexo}"/>
									</p:selectOneMenu>
								</h:panelGrid>

								<h:panelGrid columns="4">
									<h:outputLabel value="Tel. Residencial" styleClass="text-bold" />
									<h:outputLabel value="Tel. Celular" styleClass="text-bold" />
									<h:outputLabel value="Dt. Nascimento " styleClass="text-bold" />
									<h:outputLabel value="Email" styleClass="text-bold" />
									<p:inputText id="idTxtTelefoneResidenciaCliente"
										style="width:150px;" />
									<p:inputText id="idTxtTelefoneCelularCliente"
										style="width:150px;" />
									<p:calendar value="#{contratoBean.dtNascimentoContratante}"
										mode="popup" id="idTxtDataNascimentoCliente" pattern="dd/MM/yyyy" />
									<p:inputText id="idTxtEmailCliente" style="width:150px;" />
								</h:panelGrid>

								<h:panelGrid columns="1">
									<h:outputLabel value="Necessidades especiais"
										styleClass="text-bold" />
									<p:inputTextarea rows="5" style="width:975px;" />
								</h:panelGrid>

								<h:panelGrid columns="2" columnClasses="alignLeftTop, nothing">
									<h:outputLabel value="Plano de Saúde" styleClass="text-bold" />
									<h:outputLabel value="Cobertura" styleClass="text-bold" />
									<p:inputText id="idTxtPlanoSaude" style="width:500px;" />
									<p:inputTextarea rows="5" style="width:460px;" />
								</h:panelGrid>

							</h:panelGrid>

						</p:tab>


						<p:tab id="idTabClienteDoenca" title="Cliente Doenças"
							style="width:1024px;">
							<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="2" columnClasses="nothing, alignRight"
									style="width:100%;" border="0">
									<h:outputLabel value="Filtro de Doenças" styleClass="text-bold" />
									<h:outputLabel value="" />
									<p:inputText id="idTxttFiltroDoencas" style="width:600px;" />
									<p:commandButton
										value="#{messageBundle['label.generic.button.filter']}"
										icon="ui-icon-search" style="margin:0" immediate="true"
										ajax="false" action="#{contratoBean.retornarMenuPrincipal}" />
								</h:panelGrid>

								<h:panelGrid border="0">
									<p:pickList id="idPklListaDoencas"
										value="#{contratoBean.listaDoencas}" styleClass="noBorder"
										style="border:none; border-width: 0 !important;" var="item"
										itemValue="#{item}" converter="pickListDoencaConverter"
										required="true"
										requiredMessage="#{messageBundle['message.contrato.picklist.doencas.required']}">

										<f:facet name="sourceCaption">#{messageBundle['label.contrato.picklist.doencas.source']}</f:facet>
										<f:facet name="targetCaption">#{messageBundle['label.contrato.picklist.doencas.target']}</f:facet>

										<p:column>
								                	#{item.nomeDoenca}
								                </p:column>
									</p:pickList>


								</h:panelGrid>
							</h:panelGrid>
						</p:tab>


						<p:tab id="idTabClienteTratamento" title="Cliente Tratamento"
							style="width:1024px;">
							<h:panelGrid columns="1" id="idPgdCamposTratamento"
								cellpadding="0" style="width:100%;">

								<h:panelGrid columns="2" id="idPgdGrupoTratamento1" border="0">
									<h:outputLabel value="Nome Tratamento" styleClass="text-bold" />
									<h:outputLabel value="Frequência em minutos"
										styleClass="text-bold" />
									<p:inputText id="idTxtNomeTratamento" value="#{contratoBean.tratamento.nomeTratamento}"
										style="width:400px;" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.nometratamento.required']}" />
									<p:spinner id="idSpinFrequenciaMinutos"
										value="#{contratoBean.tratamento.frequenciaMinutos}" size="4" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.frequencia.required']}" />
								</h:panelGrid>

								<h:panelGrid columns="1" id="idPgdGrupoTratamento2"
									style="width:100%;" border="0">
									<h:outputLabel value="Descrição" styleClass="text-bold" />
									<p:inputTextarea id="idTxtDescricaoTratamento" rows="5"
										style="width:975px;"
										value="#{contratoBean.tratamento.descricaoTratamento}"
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.descricaotratamento.required']}" />
								</h:panelGrid>

								<h:panelGrid columns="1"
									style="width:99.5%;text-align:right !important;padding-right:0px;">

									
									<p:commandButton
										value="#{messageBundle['label.generic.button.add']}"
										icon="ui-icon-plus" style="margin:0"
										process=":frmContrato:idTabContrato:idPgdCamposTratamento"
										ajax="true"
										actionListener="#{contratoBean.adicionarTratamento}"
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposTratamento" />

								</h:panelGrid>

								<!-- Tabela de resultados -->
								<h:panelGrid columns="1" id="idPgdGrupoTratamento3"
									style="width:100%;" border="0">
									<p:dataTable id="idDtbTratamento" var="item"
										value="#{contratoBean.listaTratamentos}" rendered="true"
										emptyMessage="#{messageBundle['message.contrato.datatable.tratamento.empty']}">

										<p:column id="modelHeader" style="width:100px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.generic.column.action']}" />
											</f:facet>
											<h:panelGrid columns="3"
												columnClasses="noBorder, noBorder, noBorder">

												<p:commandLink title="Novo" ajax="true" partialSubmit="true"
													process="@this"
													update=":frmContrato:idTabContrato:idPgdCamposTratamento"
													actionListener="#{contratoBean.novoTratamento}"
													immediate="true"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/greencross-25x25.jpg"
														width="15" height="15" alt="Novo" />
												</p:commandLink>

												<p:commandLink title="Editar" ajax="true"
													partialSubmit="true" process="@this"
													update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposTratamento"
													actionListener="#{contratoBean.editarTratamento}"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<f:param name="idTratamento" value="#{item.idTratamento}" />
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/edit-pen-25x25.jpg"
														width="15" height="15" alt="Editar" />
												</p:commandLink>

												<p:commandLink
													onclick="modalExcluirTratamento('${item.idTratamento}');"
													title="Excluir">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/delete.jpg" width="15"
														height="15" alt="Excluir" />
												</p:commandLink>
											</h:panelGrid>
										</p:column>

										<p:column>
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.tratamento.column.1']}" />
											</f:facet>
											<h:outputText value="#{item.nomeTratamento}" />
										</p:column>

										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.tratamento.column.2']}" />
											</f:facet>
											<h:outputText value="#{item.frequenciaMinutos}" />
										</p:column>

									</p:dataTable>
								</h:panelGrid>
							</h:panelGrid>
						</p:tab>

						<p:tab id="idTabContato" title="Contatos" style="width:1024px;">
							<h:panelGrid columns="1" id="idPgdCamposContato"
								cellpadding="0" style="width:100%;">
															
								<h:panelGrid columns="3" id="idPgdGrupoContato1" border="0">
									<h:outputLabel value="Nome do contato" styleClass="text-bold" />									
									<h:outputLabel value="Relação" styleClass="text-bold" />
									<h:outputLabel value="" styleClass="text-bold" />							
									<p:inputText id="idTxtNomeContato" 	value="#{contratoBean.contato.nome}" style="width:477px;" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.nomecontato.required']}" />
									
										<p:selectOneMenu value="#{contratoBean.contato.grauParentesco}" style="width:150px;" >	
											<f:selectItems value="#{contratoBean.listaRelacao}" />
										</p:selectOneMenu>
										
										<p:commandButton id="idCmdModalFormaContato" value="Formas de Contato" onclick="modalFormaContato.show();" type="button"/>  
									
								</h:panelGrid>								
								
								<h:panelGrid columns="2">
									<h:outputLabel value="Endereço" styleClass="text-bold" />
									<h:outputLabel value="Bairro" styleClass="text-bold" />
									<p:inputText id="idTxtEnderecoContato" 
										value="#{contratoBean.contato.endereco}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.enderecocontato.required']}"
										style="width:477px;"/>
									<p:inputText id="idTxtBairroContato"  
										value="#{contratoBean.contato.bairro}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.bairrocontato.required']}"
										style="width:485px;"/>								
								</h:panelGrid>
								
								<h:panelGrid columns="3">
									<h:outputLabel value="Cidade" styleClass="text-bold" />
									<h:outputLabel value="Estado" styleClass="text-bold" />
									<h:outputLabel value="Cep" styleClass="text-bold" />								
									<p:inputText id="idTxtCidadeContato" 
										value="#{contratoBean.contato.cidade}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.cidadecontato.required']}"
										style="width:477px;" />
									<p:selectOneMenu value="0" style="width:150px;">
										<f:selectItems value="#{contratoBean.listaUf}"/>
									</p:selectOneMenu>
									<p:inputText id="idTxtCepContato" 
										value="#{contratoBean.contato.cep}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.cepcontato.required']}"
										style="width:100px;" 
										styleClass="cepMask"/>									
								</h:panelGrid>								
								
								<h:panelGrid columns="2">
									<h:panelGrid columns="2" styleClass="alignCenter">
										<p:selectBooleanCheckbox  value="#{contratoBean.contato.contratante}"/>
										<h:outputText value="Contratante" styleClass="text-bold" />
									</h:panelGrid>
									
									<h:panelGrid columns="3">
									<h:outputLabel value="Data Nascimento" styleClass="text-bold" />
									<h:outputLabel value="Seq. Chamada" styleClass="text-bold" />
									<h:outputLabel styleClass="text-bold" />
									<p:calendar 
										mode="popup" id="idTxtDataNascimentoContato" pattern="dd/MM/yyyy" 
										value="#{contratoBean.contato.dataNascimento}"
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.dtnascimentocontato.required']}" />
									<p:spinner id="idSpinSequenciaChamada"
										value="#{contratoBean.contato.sqaChamada}" size="4" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.sequenciachamada.required']}" />
									</h:panelGrid>	
								</h:panelGrid>			
								
								<h:panelGrid columns="1"
									style="width:99.5%;text-align:right !important;padding-right:0px;">

									<p:commandButton
										value="#{messageBundle['label.generic.button.add']}"
										icon="ui-icon-plus" style="margin:0"
										process=":frmContrato:idTabContrato:idPgdCamposContato"
										ajax="true"
										actionListener="#{contratoBean.adicionarContato}"
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposContato" />

								</h:panelGrid>

								
								<!-- Tabela de contatos -->
								<h:panelGrid columns="1" id="idPgdGrupoTableContatos"
									style="width:100%;" border="0">
									<p:dataTable id="idDtbContatos" var="item"
										value="#{contratoBean.listaContatos}" rendered="true"
										emptyMessage="#{messageBundle['message.contrato.datatable.contato.empty']}">

										<p:column id="modelHeader" style="width:100px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.generic.column.action']}" />
											</f:facet>
											<h:panelGrid columns="3"
												columnClasses="noBorder, noBorder, noBorder">

												<p:commandLink title="Novo" ajax="true" partialSubmit="true"
													process="@this"
													update=":frmContrato:idTabContrato:idPgdCamposContato"
													actionListener="#{contratoBean.novoContato}"
													immediate="true"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/greencross-25x25.jpg"
														width="15" height="15" alt="Novo" />
												</p:commandLink>

												<p:commandLink title="Editar" ajax="true"
													partialSubmit="true" process="@this"
													update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposContato"
													actionListener="#{contratoBean.editarContato}"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<f:param name="idContato" value="#{item.idContato}" />
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/edit-pen-25x25.jpg"
														width="15" height="15" alt="Editar" />
												</p:commandLink>

												<p:commandLink
													onclick="modalExcluirContato('${item.idContato}');"
													title="Excluir">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/delete.jpg" width="15"
														height="15" alt="Excluir" />
												</p:commandLink>
											</h:panelGrid>
										</p:column>

										<p:column>
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.contato.column.1']}" />
											</f:facet>
											<h:outputText value="#{item.nome}" />
										</p:column>

										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.contato.column.2']}" />
											</f:facet>
											<h:outputText value="#{item.grauParentesco}" />
										</p:column>
										
										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.contato.column.3']}" />
											</f:facet>
											<h:outputText value="#{item.sqaChamada}" />
										</p:column>										

									</p:dataTable>
								</h:panelGrid>
							</h:panelGrid>

						</p:tab>
					</p:tabView>



					<!-- Barra de botões -->
					<p:panelGrid columns="1"
						style="width:100%;text-align:right !important;padding-right:0px;">
						<h:panelGroup>
							<p:commandButton id="cmdSalvar"
								value="#{messageBundle['label.generic.button.save']}"
								icon="ui-icon-check" style="margin:0"
								actionListener="#{usuarioBean.salvar}" update="growMessage" />
							<h:outputLabel />
							<p:commandButton
								value="#{messageBundle['label.generic.button.close']}"
								icon="ui-icon-circle-close" style="margin:0" ajax="false"
								action="#{contratoBean.retornarMenuPrincipal}"
								immediate="true"
								update="growMessage" />
						</h:panelGroup>
					</p:panelGrid>
				</h:panelGrid>

				<!-- popups -->
				<p:confirmDialog id="idDlgExcluir"
					message="#{messageBundle['label.contrato.confirmDialog.delete.tratamento.title']}"
					header="Confirma exclusão ?" severity="alert" widgetVar="excluir">
					<p:commandButton id="idCmdExcluirTratamentoSim"
						value="#{messageBundle['label.generic.button.yes']}"
						partialSubmit="true" process="@this, frmContrato:txtIdTratamento"
						update=":frmContrato:growMessage, frmContrato:txtIdTratamento, frmContrato:idTabContrato:idDtbTratamento"
						oncomplete="excluir.hide()"
						actionListener="#{contratoBean.excluirTratamento}" />
					<p:commandButton id="idCmdExcluirTratamentoNao"
						value="#{messageBundle['label.generic.button.no']}"
						onclick="excluir.hide()" type="button" ajax="false"
						immediate="true" />
				</p:confirmDialog>
				
				
				<p:confirmDialog id="idDlgExcluirContato"
					message="#{messageBundle['label.contrato.confirmDialog.delete.contato.title']}"
					header="Confirma exclusão ?" severity="alert" widgetVar="excluirContato">
					<p:commandButton id="idCmdExcluirContatoSim"
						value="#{messageBundle['label.generic.button.yes']}"
						partialSubmit="true" process="@this, frmContrato:txtIdContato"
						update=":frmContrato:growMessage, frmContrato:txtIdContato, frmContrato:idTabContrato:idDtbContatos"
						oncomplete="excluirContato.hide()"
						actionListener="#{contratoBean.excluirContato}" />
					<p:commandButton id="idCmdExcluirContatoNao"
						value="#{messageBundle['label.generic.button.no']}"
						onclick="excluirContato.hide()" type="button" ajax="false"
						immediate="true" />
				</p:confirmDialog>
				
				
				<p:dialog id="modalFormaContato" header="Formas de contato" widgetVar="modalFormaContato" modal="true" >  
    			
    				<h:panelGrid columns="1" id="idPgdCamposFormaContato"
								cellpadding="0" style="width:100%;">

								<h:panelGrid columns="3" id="idPgdGrupoTratamento1" border="0">
									<h:outputLabel value="Tipo de Contato" styleClass="text-bold" />
									<h:outputLabel value="Telefone"	styleClass="text-bold" />
									<h:outputLabel value="Email" styleClass="text-bold" />
									<p:selectOneMenu value="0" style="width:180px;">
										<f:selectItems value="#{contratoBean.listaFormaContato}"/>
									</p:selectOneMenu>

									<p:inputText id="idTxtFormaContatoTelefone" value="#{contratoBean.tratamento.nomeTratamento}"
										style="width:140px;" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.nometratamento.required']}" />	
										
									<p:inputText id="idTxtFormaContatoEmail" value="#{contratoBean.tratamento.nomeTratamento}"
										style="width:300px;" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.nometratamento.required']}" />	
								</h:panelGrid>

							<h:panelGrid columns="1"
									style="width:99.5%;text-align:right !important;padding-right:0px;">

									<p:commandButton
										value="#{messageBundle['label.generic.button.add']}"
										icon="ui-icon-plus" style="margin:0"
										process=":frmContrato:idTabContrato:idPgdCamposContato"
										ajax="true"
										actionListener="#{contratoBean.adicionarContato}"
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposContato" />

								</h:panelGrid>								
								
								<p:dataTable id="idDtbFormaContato" var="item"
										value="#{contratoBean.contato.listaFormaContato}" rendered="true"
										emptyMessage="#{messageBundle['message.contrato.datatable.contato.empty']}">

										<p:column id="modelHeader" style="width:100px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.generic.column.action']}" />
											</f:facet>
											<h:panelGrid columns="3"
												columnClasses="noBorder, noBorder, noBorder">

												<p:commandLink title="Novo" ajax="true" partialSubmit="true"
													process="@this"
													update=":frmContrato:idTabContrato:idPgdCamposContato"
													actionListener="#{contratoBean.novoContato}"
													immediate="true"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/greencross-25x25.jpg"
														width="15" height="15" alt="Novo" />
												</p:commandLink>

												<p:commandLink title="Editar" ajax="true"
													partialSubmit="true" process="@this"
													update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposContato"
													actionListener="#{contratoBean.editarContato}"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<f:param name="idContato" value="#{item.idFormaContato}" />
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/edit-pen-25x25.jpg"
														width="15" height="15" alt="Editar" />
												</p:commandLink>

												<p:commandLink
													onclick="modalExcluirContato('${item.idFormaContato}');"
													title="Excluir">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/delete.jpg" width="15"
														height="15" alt="Excluir" />
												</p:commandLink>
											</h:panelGrid>
										</p:column>

										<p:column>
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.formaconato.column.1']}" />
											</f:facet>
											<h:outputText value="{item.nome}" />
										</p:column>

										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.formaconato.column.2']}" />
											</f:facet>
											<h:outputText value="#{item.telefone}" />
										</p:column>
										
										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.formaconato.column.3']}" />
											</f:facet>
											<h:outputText value="#{item.email}" />
										</p:column>										

									</p:dataTable>								
								
									<p:panelGrid columns="1"
										style="width:100%;text-align:right !important;padding-right:0px;">
										<h:panelGroup>				
											<p:commandButton
												value="#{messageBundle['label.generic.button.close']}"
												type="button"
												onclick="modalFormaContato.hide();" />
										</h:panelGroup>
									</p:panelGrid>								
    				</h:panelGrid>    			    			
				</p:dialog>

			</div>
		</h:form>
	</h:body>
</f:view>
</html>

