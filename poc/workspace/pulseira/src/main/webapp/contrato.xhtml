<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<f:view locale="#{contratoBean.locale}">
	<h:head>
		<style type="text/css">
			.ui-picklist-list {
				width: 470px !important;
			}
		</style>
		<script language="javascript">		
		
		
		</script>
		<script type="text/javascript" src="/pulseira/js/contrato.js"></script>
	</h:head>

	<h:body>
		<h:form id="frmContrato">

			<p:growl id="growMessage" showDetail="false" sticky="false" />
			<ui:include src="inc/cabecalho.xhtml" />
			<h:panelGrid id="separador1" border="0"></h:panelGrid>

			<div align="center" style="width: '100%;'">
				<h:inputHidden id="txtIdTratamento"
					value="#{contratoBean.tratamento.idTratamento}" />
				<h:inputHidden id="txtIdContato"
					value="#{contratoBean.contato.idContato}" />					
				<h:panelGrid id="idPgdPrincipal" style="width:1024px;" cellspacing="0">

					<p:tabView id="idTabContrato" style="width:1024px;">
						<p:tab id="idTab1" title="#{messageBundle['label.contrato.tabview.tabContrato.contrato']}">
							<h:panelGrid columns="2" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="3">
									<h:outputLabel value="#{messageBundle['label.contrato.field.numerocontrato']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.cpfcontratante']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.rgcontratante']}" styleClass="text-bold" />
									<p:inputText id="idTxtNumeroContrato" maxlength="10" style="width:150px;" />
									<p:inputText id="idTxtCpfContratante" 
										value="#{contratoBean.contrato.cpfContratante}" 
										required="true" requiredMessage="#{messageBundle['message.contrato.field.cpfcontratante.required']}"
										style="width:150px;" styleClass="cpfMask"  >
											<f:param value="CPF Contratante" />
									</p:inputText>									
									<p:inputText id="idTxtRgContrato" maxlength="14" 
										value="#{contratoBean.contrato.cpfContratante}" 
										required="true" requiredMessage="#{messageBundle['message.contrato.field.rgcontratante.required']}"
										style="width:150px;" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="#{messageBundle['label.contrato.field.nomecontratante']}"  styleClass="text-bold" />
									<p:inputText  id="idTxtNomeContratante" 
										maxlength="60" 
										required="true" requiredMessage="#{messageBundle['message.contrato.field.nomecontratante.required']}"
										value="#{contratoBean.contrato.nomeContratante}"  style="width:478px;" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="#{messageBundle['label.generic.field.endereco']}" styleClass="text-bold" />
									<p:inputText id="idTxtEnderecoContratante" style="width:477px;" 
										value="#{contratoBean.contrato.enderecoContratante}" 
										maxlength="60"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.enderecocontato.required']}"
										styleClass="text-bold" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="#{messageBundle['label.generic.field.bairro']}"/>
									<p:inputText id="idTxtBairroContratante" style="width:478px;" 
										maxlength="60" 
										required="true" requiredMessage="#{messageBundle['message.contrato.field.bairrocontratante.required']}"
										value="#{contratoBean.contrato.bairroContratante}" styleClass="text-bold" />
								</h:panelGrid>
								<h:panelGrid columns="1">
									<h:outputLabel value="#{messageBundle['label.generic.field.cidade']}"  styleClass="text-bold" />
									<p:inputText id="idTxtCidadeContratante" 
										maxlength="60"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.cidadecontratante.required']}"
										value="#{contratoBean.contrato.cidadeContratante}" style="width:477px;" />
								</h:panelGrid>
								<h:panelGrid columns="2">
									<h:outputLabel value="#{messageBundle['label.generic.field.uf']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.cep']}"  styleClass="text-bold" />
									<p:selectOneMenu id="idCmdUfContratante" value="#{contratoBean.contrato.ufContratante}" style="width:250px;">
										<f:selectItem itemValue="0" itemLabel="Selecione..."/>
										<f:selectItems value="#{contratoBean.listaUf}"/>
										<f:validator validatorId="comboRequiredValidator"/>	
									</p:selectOneMenu>
									<p:inputText id="idTxtCepContratante" value="#{contratoBean.contrato.cepContratante}" 
										maxlength="10"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.cepcontratante.required']}"
										style="width:220px;" styleClass="cepMask"/>
								</h:panelGrid>
							</h:panelGrid>
							<h:panelGrid columns="1" cellpadding="5" style="width:100%;">
								<h:panelGrid columns="2">
									<h:outputLabel value="#{messageBundle['label.generic.field.datanascimento']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.email']}" styleClass="text-bold" />
									<p:calendar value="#{contratoBean.contrato.dtNascimentoContratante}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.emailcontratante.required']}"
										mode="popup" id="idTxtDataNascimentoContratante" pattern="dd/MM/yyyy"
										locale="#{contratoBean.locale}"/>
									<p:inputText id="idTxtEmailContratante" 
										maxlength="100"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.datanascimentocontratante.required']}"
										value="#{contratoBean.contrato.emailContratante}" style="width:500px;" >
											<f:validator validatorId="emailValidator"  />
										</p:inputText>
								</h:panelGrid>

								<h:panelGrid columns="3">
									<h:outputLabel value="#{messageBundle['label.contrato.field.datainiciovalidade']}"
										styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.datafimvalidade']}"
										styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.datasuspensao']}" styleClass="text-bold" />
									<p:calendar  value="#{contratoBean.contrato.dtInicioValidade}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.datainiciovalidade.required']}"
										mode="popup" id="idTxtDataInicioValidade" pattern="dd/MM/yyyy" 
										locale="#{contratoBean.locale}"/>
									<p:calendar value="#{contratoBean.contrato.dtFinalValidade}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.datafinalvalidade.required']}"
										mode="popup" id="idTxtDataFinalValidade" pattern="dd/MM/yyyy" 
										locale="#{contratoBean.locale}"/>
									<p:calendar value="#{contratoBean.contrato.dtSuspensao}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.datasuspensao.required']}"
										mode="popup" id="idTxtDataSuspensao" pattern="dd/MM/yyyy" 
										locale="#{contratoBean.locale}" />
								</h:panelGrid>

								<h:panelGrid columns="1">
									<h:outputLabel value="#{messageBundle['label.contrato.field.pacoteservico']}"
										styleClass="text-bold" />
									<p:selectOneMenu id="idCmbServico" value="#{contratoBean.contrato.idServico}" style="width:350px;">
										<f:selectItem itemValue="0" itemLabel="Selecione..."/>
										<f:selectItems value="#{contratoBean.listaServicos}"/>
										<f:validator validatorId="comboRequiredValidator"/>	
									</p:selectOneMenu>
								</h:panelGrid>
							</h:panelGrid>
						</p:tab>
						
						<!-- ########## TAB CLIENTE ##########-->
						<p:tab id="idTabClienteBase" title="#{messageBundle['label.contrato.tabview.tabContrato.clientebase']}"
							style="width:99.5%;">
							<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="3">
									<h:outputLabel value="#{messageBundle['label.contrato.field.cpfcliente']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.rgcliente']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.nomecliente']}" styleClass="text-bold" />
									<p:inputText id="idTxtCpfCliente"
										value="#{contratoBean.contrato.paciente.cpf}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.cpfpaciente.required']}"
										style="width:150px;" styleClass="cpfMask"/>
									<p:inputText id="idTxtRgCliente" 
										maxlength="14"
										value="#{contratoBean.contrato.paciente.rg}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.rgpaciente.required']}"
										style="width:150px;" />
									<p:inputText id="idTxtNomeCliente" 
										maxlength="60"
										value="#{contratoBean.contrato.paciente.nomePaciente}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.nomepaciente.required']}"
										style="width:648px;" />
								</h:panelGrid>

								<h:panelGrid columns="2">
									<h:outputLabel value="#{messageBundle['label.generic.field.endereco']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.bairro']}" styleClass="text-bold" />
									<p:inputText id="idTxtEnderecoCliente" 
										maxlength="60"
										value="#{contratoBean.contrato.paciente.endereco}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.enderecopaciente.required']}"
										style="width:477px;" />
									<p:inputText id="idTxtBairroCliente"
										maxlength="60" 
										value="#{contratoBean.contrato.paciente.bairro}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.bairropaciente.required']}"
										style="width:485px;" />
								</h:panelGrid>

								<h:panelGrid columns="4">
									<h:outputLabel value="#{messageBundle['label.generic.field.cidade']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.uf']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.cep']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.sexo']}" styleClass="text-bold" />
									<p:inputText id="idTxtCidadeCliente" 
										maxlength="60"
										value="#{contratoBean.contrato.paciente.cidade}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.cidadepaciente.required']}"
										style="width:477px;" />
									<p:selectOneMenu value="#{contratoBean.contrato.paciente.uf}" style="width:150px;">
										<f:selectItem itemValue="0" itemLabel="Selecione..."/>
										<f:selectItems value="#{contratoBean.listaUf}"/>
										<f:validator validatorId="comboRequiredValidator"/>	
									</p:selectOneMenu>
									<p:inputText id="idTxtCepCliente" 
										value="#{contratoBean.contrato.paciente.cep}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.ceppaciente.required']}"
										style="width:100px;" styleClass="cepMask" />
									<p:selectOneMenu id="idCboSexoCliente" 
										value="#{contratoBean.contrato.paciente.sexo}" 
										style="width:150px;">
										<f:selectItem itemValue="0" itemLabel="Selecione..."/>
										<f:selectItems value="#{contratoBean.listaSexo}"/>
										<f:validator validatorId="comboRequiredValidator"/>	
									</p:selectOneMenu>
								</h:panelGrid>

								<h:panelGrid columns="4">
									<h:outputLabel value="#{messageBundle['label.contrato.field.telefoneresidencial']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.contrato.field.telefonecelular']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.datanascimento']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.email']}" styleClass="text-bold" style="width:485px;" />
									<p:inputText id="idTxtTelefoneResidenciaCliente"
										value="#{contratoBean.contrato.paciente.telefoneResidencial}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.telefoneresidencialpaciente.required']}"
										style="width:150px;" styleClass="telefoneMask" />
									<p:inputText id="idTxtTelefoneCelularCliente"
										value="#{contratoBean.contrato.paciente.telefoneCelular}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.telefonecelularpaciente.required']}"
										style="width:150px;" styleClass="telefoneMask"/>
									<p:calendar 
										value="#{contratoBean.contrato.paciente.dataNascimento}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.datanascimentopaciente.required']}"
										mode="popup" id="idTxtDataNascimentoCliente" pattern="dd/MM/yyyy" locale="#{contratoBean.locale}"/>
									<p:inputText id="idTxtEmailCliente" 
										maxlength="100"
										value="#{contratoBean.contrato.paciente.email}"
										required="true" requiredMessage="#{messageBundle['message.contrato.field.emailpaciente.required']}"
										style="width:495px;" >
											<f:validator validatorId="emailValidator"  />
										</p:inputText>
								</h:panelGrid>

								<h:panelGrid columns="1">
									<h:outputLabel 
										value="#{messageBundle['label.contrato.field.necessidadesespeciais']}"
										styleClass="text-bold" />
									<p:inputTextarea rows="5" 
										value="#{contratoBean.contrato.paciente.necessidadeEspecial}"
										style="width:975px;" />
								</h:panelGrid>

								<h:panelGrid columns="2" columnClasses="alignLeftTop, nothing">
									<h:outputLabel 
										value="#{messageBundle['label.contrato.field.planosaude']}" 
										styleClass="text-bold" />
									<h:outputLabel 
										value="#{messageBundle['label.contrato.field.cobertura']}"  
										styleClass="text-bold" />
									<p:inputText id="idTxtPlanoSaude" 
										value="#{contratoBean.contrato.paciente.planoSaude}"
										maxlength="60"
										style="width:500px;" />
									<p:inputTextarea rows="5" 
										value="#{contratoBean.contrato.paciente.cobertura}"
										style="width:460px;" />
								</h:panelGrid>
							</h:panelGrid>
						</p:tab>
						
	
						<!--  ########## TAB CLIENTE DISPOSITIVO ########## -->
						<p:tab id="idTabClienteDispositivo" title="#{messageBundle['label.contrato.tabview.tabContrato.clientedispositivo']}"
							style="width:1024px;">
							<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="2" columnClasses="nothing, alignRight"
									style="width:100%;" border="0">
									<h:outputLabel value="#{messageBundle['label.contrato.field.filtrodispositivo']}" styleClass="text-bold" />
									<h:outputLabel value="" />
									<p:inputText id="idTxttFiltroDispositivo" style="width:600px;" />
									
									<p:commandButton id="cmdFiltrarDispositivo"
										value="#{messageBundle['label.generic.button.filter']}"
										icon="ui-icon-search" 
										style="margin:0"
										actionListener="#{contratoBean.filtrarDispositivoCliente}" 
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPklistaDispositivos"
										process="@this, :frmContrato:idTabContrato:idTxttFiltroDispositivo"/>
		
								</h:panelGrid>

								<h:panelGrid border="0">
									<p:pickList id="idPklistaDispositivos"
										value="#{contratoBean.pickListDispositivosCliente}" styleClass="noBorder"
										style="border:none; border-width: 0 !important;" var="item"
										itemValue="#{item}" converter="dispositivoConverter"
										required="true"
										requiredMessage="#{messageBundle['message.contrato.picklist.doencas.required']}">

											<f:facet name="sourceCaption">#{messageBundle['label.contrato.picklist.dispositivo.source']}</f:facet>
											<f:facet name="targetCaption">#{messageBundle['label.contrato.picklist.dispositivo.target']}</f:facet>
	
											<p:column>#{item.descricaoDispositivo}</p:column>
									</p:pickList>
								</h:panelGrid>
								
								<h:panelGrid columns="2" columnClasses="nothing, alignRight"
									style="width:100%;" border="0">
									<h:outputLabel value="#{messageBundle['label.contrato.field.filtrocentral']}" styleClass="text-bold" />
									<h:outputLabel value="" />
									<p:inputText id="idTxttFiltroCentral" style="width:600px;" />

									<p:commandButton id="cmdFiltrarCentral"
										value="#{messageBundle['label.generic.button.filter']}"
										icon="ui-icon-search" 
										style="margin:0"
										actionListener="#{contratoBean.filtrarCentralCliente}" 
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPkListCentral"
										process="@this, :frmContrato:idTabContrato:idTxttFiltroCentral"/>
		
								</h:panelGrid>		
								
								<h:panelGrid border="0">
									<p:pickList id="idPkListCentral"
										value="#{contratoBean.pickListCentralCliente}" styleClass="noBorder"
										style="border:none; border-width: 0 !important;" var="item"
										itemValue="#{item}" converter="centralConverter"
										required="true"
										requiredMessage="#{messageBundle['message.contrato.picklist.doencas.required']}">

											<f:facet name="sourceCaption">#{messageBundle['label.contrato.picklist.central.source']}</f:facet>
											<f:facet name="targetCaption">#{messageBundle['label.contrato.picklist.central.target']}</f:facet>
	
											<p:column>#{item.descricaoCentral}</p:column>
									</p:pickList>
								</h:panelGrid>														
							</h:panelGrid>
						</p:tab>

						<!--  ########## TAB DOENÇA ########## -->
						<p:tab id="idTabClienteDoenca" title="#{messageBundle['label.contrato.tabview.tabContrato.doencas']}"
							style="width:1024px;">
							<h:panelGrid columns="1" cellpadding="0" style="width:100%;">
								<h:panelGrid columns="2" columnClasses="nothing, alignRight"
									style="width:100%;" border="0">
									<h:outputLabel value="#{messageBundle['label.contrato.field.filtrodoenca']}" styleClass="text-bold" />
									<h:outputLabel value="" />
									<p:inputText id="idTxttFiltroDoencas" style="width:600px;" />
									<p:commandButton
										value="#{messageBundle['label.generic.button.filter']}"
										icon="ui-icon-search" style="margin:0" immediate="true"
										ajax="false" action="#{contratoBean.retornarMenuPrincipal}" />
								</h:panelGrid>

								<h:panelGrid border="0">
									<p:pickList id="idPklListaDoencas"
										value="#{contratoBean.pickListDoencas}" styleClass="noBorder"
										style="border:none; border-width: 0 !important;" var="item"
										itemValue="#{item}" converter="pickListDoencaConverter"
										required="true"
										requiredMessage="#{messageBundle['message.contrato.picklist.doencas.required']}">

											<f:facet name="sourceCaption">#{messageBundle['label.contrato.picklist.doencas.source']}</f:facet>
											<f:facet name="targetCaption">#{messageBundle['label.contrato.picklist.doencas.target']}</f:facet>
	
											<p:column>#{item.nomeDoenca}</p:column>
									</p:pickList>
								</h:panelGrid>
							</h:panelGrid>
						</p:tab>

						<!-- ##########TAB TRATAMENTO ########## -->
						<p:tab id="idTabClienteTratamento" 
							title="#{messageBundle['label.contrato.tabview.tabContrato.tratamento']}"
							style="width:1024px;">
							<h:panelGrid columns="1" id="idPgdCamposTratamento"
								cellpadding="0" style="width:100%;">

								<h:panelGrid columns="3" id="idPgdGrupoTratamento1" border="0">
									<h:outputLabel										
										value="#{messageBundle['label.contrato.field.nomeTratamento']}" 
										styleClass="text-bold" />
									<h:outputLabel 
										value="#{messageBundle['label.contrato.field.horaminutoinicialtratamento']}" 
										styleClass="text-bold" />										
									<h:outputLabel value="" styleClass="text-bold" />		
									<p:inputText id="idTxtNomeTratamento" value="#{contratoBean.tratamento.nomeTratamento}"
										style="width:400px;" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.nometratamento.required']}" />
										
									<p:calendar  value="#{contratoBean.tratamento.dataHoraInicial}" pattern="dd/MM/yyyy HH:mm" locale="#{contratoBean.locale}" />
										
									<p:commandButton id="idCmdModalHorariosTratamento" icon="ui-icon-clock" value="Horários" onclick="modalHorariosTratamento.show();" type="button"/>  
								</h:panelGrid>

								<h:panelGrid columns="1" id="idPgdGrupoTratamento2"
									style="width:100%;" border="0">
									<h:outputLabel 
										value="#{messageBundle['label.contrato.field.descricaotratamento']}"  
										styleClass="text-bold" />
									<p:inputTextarea id="idTxtDescricaoTratamento" rows="5"
										style="width:975px;"
										value="#{contratoBean.tratamento.descricaoTratamento}"
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.descricaotratamento.required']}" />
								</h:panelGrid>

								<h:panelGrid columns="1"
									style="width:99.5%;text-align:right !important;padding-right:0px;">								
									<p:commandButton
										value="#{messageBundle['label.generic.button.add']}"
										icon="ui-icon-plus" style="margin:0"
										process=":frmContrato:idTabContrato:idPgdCamposTratamento"
										ajax="true"
										actionListener="#{contratoBean.adicionarTratamento}"
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposTratamento" />
								</h:panelGrid>

								<!-- Tabela de resultados -->
								<h:panelGrid columns="1" id="idPgdGrupoTratamento3"
									style="width:100%;" border="0">
									<p:dataTable id="idDtbTratamento" var="item"
										value="#{contratoBean.listaTratamentos}" rendered="true"
										emptyMessage="#{messageBundle['message.contrato.datatable.tratamento.empty']}">

										<p:column id="modelHeader" style="width:100px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.generic.column.action']}" />
											</f:facet>
											<h:panelGrid columns="3"
												columnClasses="noBorder, noBorder, noBorder">

												<p:commandLink title="Novo" ajax="true" partialSubmit="true"
													process="@this"
													update=":frmContrato:idTabContrato:idPgdCamposTratamento"
													actionListener="#{contratoBean.novoTratamento}"
													immediate="true"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/greencross-25x25.jpg"
														width="15" height="15" alt="Novo" />
												</p:commandLink>

												<p:commandLink title="Editar" ajax="true"
													partialSubmit="true" process="@this"
													update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposTratamento"
													actionListener="#{contratoBean.editarTratamento}"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<f:param name="idTratamento" value="#{item.idTratamento}" />
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/edit-pen-25x25.jpg"
														width="15" height="15" alt="Editar" />
												</p:commandLink>

												<p:commandLink
													onclick="modalExcluirTratamento('${item.idTratamento}');"
													title="Excluir">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/delete.jpg" width="15"
														height="15" alt="Excluir" />
												</p:commandLink>
											</h:panelGrid>
										</p:column>

										<p:column>
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.tratamento.column.1']}" />
											</f:facet>
											<h:outputText value="#{item.nomeTratamento}" />
										</p:column>

										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.tratamento.column.2']}" />
											</f:facet>
											<h:outputText value="#{item.dataHoraInicial}" >
												<f:convertDateTime pattern="dd/MM/yyyy HH:mm" locale="#{contratoBean.locale}"/>
											</h:outputText>
										</p:column>

									</p:dataTable>
								</h:panelGrid>
							</h:panelGrid>
						</p:tab>
						
						<!-- ########## TAB CONTATO -->
						<p:tab id="idTabContato" title="#{messageBundle['label.contrato.tabview.tabContrato.contatos']}"  style="width:1024px;">
							<h:panelGrid columns="1" id="idPgdCamposContato"
								cellpadding="0" style="width:100%;">
															
								<h:panelGrid columns="3" id="idPgdGrupoContato1" border="0">
									<h:outputLabel value="Nome do contato" styleClass="text-bold" />									
									<h:outputLabel value="Relação" styleClass="text-bold" />
									<h:outputLabel value="" styleClass="text-bold" />							
									<p:inputText id="idTxtNomeContato" 	value="#{contratoBean.contato.nome}" style="width:477px;" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.nomecontato.required']}" />
									
										<p:selectOneMenu value="#{contratoBean.contato.grauParentesco}" style="width:150px;" >	
											<f:selectItem itemValue="0" itemLabel="Selecione..."/>
											<f:selectItems value="#{contratoBean.listaRelacao}" />
											<f:validator validatorId="comboRequiredValidator"/>	
										</p:selectOneMenu>										
										<p:commandButton id="idCmdModalFormaContato" value="Formas de Contato" onclick="modalFormaContato.show();" type="button"/>  
									
								</h:panelGrid>								
								
								<h:panelGrid columns="2">
									<h:outputLabel value="#{messageBundle['label.generic.field.endereco']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.bairro']}" styleClass="text-bold" />
									<p:inputText id="idTxtEnderecoContato" 
										value="#{contratoBean.contato.endereco}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.enderecocontato.required']}"
										style="width:477px;"/>
									<p:inputText id="idTxtBairroContato"  
										value="#{contratoBean.contato.bairro}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.bairrocontato.required']}"
										style="width:485px;"/>								
								</h:panelGrid>
								
								<h:panelGrid columns="3">
									<h:outputLabel value="#{messageBundle['label.generic.field.cidade']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.uf']}" styleClass="text-bold" />
									<h:outputLabel value="#{messageBundle['label.generic.field.cep']}" styleClass="text-bold" />								
									<p:inputText id="idTxtCidadeContato" 
										value="#{contratoBean.contato.cidade}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.cidadecontato.required']}"
										style="width:477px;" />
									<p:selectOneMenu value="0" style="width:150px;">
										<f:selectItem itemValue="0" itemLabel="Selecione..."/>
										<f:selectItems value="#{contratoBean.listaUf}"/>
										<f:validator validatorId="comboRequiredValidator"/>	
									</p:selectOneMenu>
									<p:inputText id="idTxtCepContato" 
										value="#{contratoBean.contato.cep}"  
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.cepcontato.required']}"
										style="width:100px;" 
										styleClass="cepMask"/>									
								</h:panelGrid>								
								
								<h:panelGrid columns="2">
									<h:panelGrid columns="2" styleClass="alignCenter">
										<p:selectBooleanCheckbox  value="#{contratoBean.contato.contratante}"/>
										<h:outputText 
											value="#{messageBundle['label.contrato.field.contratante']}" 
											styleClass="text-bold" />
									</h:panelGrid>
									
									<h:panelGrid columns="3">
									<h:outputLabel 
										value="#{messageBundle['label.generic.field.datanascimento']}" 
										styleClass="text-bold" />
									<h:outputLabel 
										value="#{messageBundle['label.contrato.field.sequenciachamada']}"										
										styleClass="text-bold" />
									<h:outputLabel styleClass="text-bold" />
									<p:calendar 
										mode="popup" id="idTxtDataNascimentoContato" pattern="dd/MM/yyyy" 
										value="#{contratoBean.contato.dataNascimento}"
										required="true" 
										requiredMessage="#{messageBundle['message.contrato.field.dtnascimentocontato.required']}" 
										locale="#{contratoBean.locale}"/>
									<p:spinner id="idSpinSequenciaChamada"
										value="#{contratoBean.contato.sqaChamada}" size="4" 
										required="true"
										requiredMessage="#{messageBundle['message.contrato.field.sequenciachamada.required']}" />
									</h:panelGrid>	
								</h:panelGrid>			
								
								<h:panelGrid columns="1"
									style="width:99.5%;text-align:right !important;padding-right:0px;">

									<p:commandButton
										value="#{messageBundle['label.generic.button.add']}"
										icon="ui-icon-plus" style="margin:0"
										process=":frmContrato:idTabContrato:idPgdCamposContato"
										ajax="true"
										actionListener="#{contratoBean.adicionarContato}"
										update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposContato" />

								</h:panelGrid>
								
								<!-- Tabela de contatos -->
								<h:panelGrid columns="1" id="idPgdGrupoTableContatos"
									style="width:100%;" border="0">
									<p:dataTable id="idDtbContatos" var="item"
										value="#{contratoBean.listaContatos}" rendered="true"
										emptyMessage="#{messageBundle['message.contrato.datatable.contato.empty']}">

										<p:column id="modelHeader" style="width:100px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.generic.column.action']}" />
											</f:facet>
											<h:panelGrid columns="3"
												columnClasses="noBorder, noBorder, noBorder">

												<p:commandLink title="Novo" ajax="true" partialSubmit="true"
													process="@this"
													update=":frmContrato:idTabContrato:idPgdCamposContato"
													actionListener="#{contratoBean.novoContato}"
													immediate="true"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/greencross-25x25.jpg"
														width="15" height="15" alt="Novo" />
												</p:commandLink>

												<p:commandLink title="Editar" ajax="true"
													partialSubmit="true" process="@this"
													update=":frmContrato:growMessage, :frmContrato:idTabContrato:idPgdCamposContato"
													actionListener="#{contratoBean.editarContato}"
													oncomplete="$('.ui-state-error').removeClass('ui-state-error');">
													<f:param name="idContato" value="#{item.idContato}" />
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/edit-pen-25x25.jpg"
														width="15" height="15" alt="Editar" />
												</p:commandLink>

												<p:commandLink
													onclick="modalExcluirContato('${item.idContato}');"
													title="Excluir">
													<h:graphicImage
														url="#{contratoBean.urlImage}/crud/delete.jpg" width="15"
														height="15" alt="Excluir" />
												</p:commandLink>
											</h:panelGrid>
										</p:column>

										<p:column>
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.contato.column.1']}" />
											</f:facet>
											<h:outputText value="#{item.nome}" />
										</p:column>

										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.contato.column.2']}" />
											</f:facet>
											<h:outputText value="#{item.grauParentesco}" >
												<f:converter converterId="grauParentescoConverter"> </f:converter>
											</h:outputText>
										</p:column>
										
										<p:column style="width:200px;">
											<f:facet name="header">
												<h:outputText
													value="#{messageBundle['label.contrato.datatable.contato.column.3']}" />
											</f:facet>
											<h:outputText value="#{item.sqaChamada}" />
										</p:column>										

									</p:dataTable>
								</h:panelGrid>
							</h:panelGrid>
						</p:tab>
					</p:tabView>
					
					<!-- Barra de botões -->
					<p:panelGrid columns="1"
						style="width:100%;text-align:right !important;padding-right:0px;">
						<h:panelGroup>
							<p:commandButton id="cmdSalvar"
								value="#{messageBundle['label.generic.button.save']}"
								icon="ui-icon-check" style="margin:0"
								actionListener="#{usuarioBean.salvar}" 
								update="growMessage, frmContrato:idTabContrato" 
								process="@this, frmContrato:idTabContrato:idTab1, frmContrato:idTabContrato:idTabClienteBase"/>

							<h:outputLabel />
							<p:commandButton
								value="#{messageBundle['label.generic.button.close']}"
								icon="ui-icon-circle-close" style="margin:0" ajax="false"
								action="#{contratoBean.retornarMenuPrincipal}"
								immediate="true"
								update="growMessage" />
						</h:panelGroup>
					</p:panelGrid>
				</h:panelGrid>

				<!-- popups -->
				<ui:include src="contrato/modal.xhtml" />
				
			</div>
		</h:form>
	</h:body>
</f:view>
</html>

