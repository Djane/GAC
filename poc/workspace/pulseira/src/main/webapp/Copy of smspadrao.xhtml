<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<style type="text/css">
				
		</style>

		<script language="javascript" >
			function modalExcluir(login) {
				$("#frmUsuario\\:txtIdLoginSelecionado").val(login);		
				excluir.show();
			}
		</script>
		
	</h:head>	
	
	<h:body>
		
		<h:form id="frmSms">		
	
			<p:growl id="growMessage" showDetail="false" sticky="false" />			
			
			<ui:include src="inc/cabecalho.xhtml" />
			
			<h:panelGrid id="separador1" border="0"></h:panelGrid>
		
			<div align="center" style="width: '100%;'">
				
				<h:panelGrid width="800px;">					
					<p:dataTable id="logins" var="item"  
						value="#{smsPadraoBean.listaMensagens}" rendered="true" emptyMessage="Não há mensagens cadastradas">

						<p:column id="modelHeader" style="width:300px;">
							<f:facet name="header">
								<h:outputText value="Título" />
							</f:facet>
							<h:outputText value="#{item.titulo}" />
						</p:column>

						<p:column style="width:400px;" >
							<f:facet name="header">
								<h:outputText value="Mesagem" />
							</f:facet>
							<h:outputText value="#{item.descricao}" />
						</p:column>

						<p:column style="width:100px;">
							<f:facet name="header">
								<h:outputText value="Ação" />
							</f:facet>							
							<h:panelGrid columns="3" columnClasses="noBorder, noBorder, noBorder">							
								<p:commandLink onclick="novaMensagem();" title="Nova mensagem">
									<h:graphicImage url="#{smsPadraoBean.urlImage}/crud/greencross-25x25.jpg" width="15" height="15" alt="Nova mensagem"/>
								</p:commandLink>									 	
																	
								<p:commandLink  onclick="editarMensagem('${item.titulo}','${item.descricao}');" title="Editar mensagem">
									<h:graphicImage url="#{smsPadraoBean.urlImage}/crud/edit-pen-25x25.jpg" width="15" height="15" alt="Editar mensagem" />
								</p:commandLink>
	
								<p:commandLink  onclick="excluir.show();" title="Excluir mensagem">
									<h:graphicImage url="#{smsPadraoBean.urlImage}/crud/x-red-25x25.jpg" width="15" height="15" alt="Excluir mensagem"/>
								</p:commandLink>							
							</h:panelGrid>
						</p:column>
					</p:dataTable>				
					
					<h:panelGrid columns="1"
						style="width:100%;text-align:right !important;">
						<h:panelGroup>				
							<p:commandButton value="Fechar" 
								icon="ui-icon-circle-close" 
								style="margin:0" ajax="false" 
								action="#{smsPadraoBean.fechar}" />
						</h:panelGroup>
					</h:panelGrid>
				</h:panelGrid>
				
				
				
			</div>
			
			<p:dialog id="modalDialog" header="Nova mensagem" widgetVar="modal" modal="true" > 
				<p:panelGrid columns="1">
					<h:outputLabel value="Titulo da mensagem" />
					<p:inputText id="idTxtTituloSms" 
						value="#{smsPadraoBean.tituloMensagem}" 
						style="width:300px;"/>
					<h:outputLabel value="Descrição" />
					<p:inputTextarea id="icTxtMensagem" 
						value="#{smsPadraoBean.descricaoMensagem}" 
						rows="4" cols="50" />
				</p:panelGrid>
				
				
		
				
				<h:panelGrid />
				
				<h:panelGrid columns="1"
						style="width:100%;text-align:right !important;">
						<h:panelGroup>
							<p:commandButton id="cmdSalvar" value="Salvar"
								icon="ui-icon-check" style="margin:0"
								actionListener="#{smsPadraoBean.salvar}" 
								ajax="false" update="growMessage"/>
							<h:outputLabel />
							<p:commandButton type="button" value="Fechar" 
								icon="ui-icon-circle-close" 
								style="margin:0" onclick="modal.hide();" />
						</h:panelGroup>
				</h:panelGrid>
			</p:dialog>
			
			<p:confirmDialog id="confirmDialog" message="Confirma a exclusão da mensagem ?"
				header="Confirma exclusão ?" severity="alert" widgetVar="excluir">				
					<p:commandButton id="idCmdSim" value="Sim" update="growMessage" oncomplete="excluir.hide()"
					actionListener="#{buttonBean.destroyWorld}" />
					<p:commandButton id="idCmdNao" value="Não" onclick="excluir.hide()" type="button" />
			</p:confirmDialog>
			
		</h:form>
	</h:body>
</f:view>
</html>

